(this["webpackJsonpcookbooks-ui-cra"]=this["webpackJsonpcookbooks-ui-cra"]||[]).push([[0],{1007:function(e,t,s){},101:function(e,t,s){e.exports={root:"Section_root__3vFzI",messages:"Section_messages__2jN5o",header:"Section_header__2N29h",content:"Section_content__1z0-L"}},1010:function(e,t,s){},1011:function(e,t,s){},1012:function(e,t,s){},102:function(e,t,s){e.exports={root:"SectionHeader_root__1nA-L",heading:"SectionHeader_heading__3LRjW","for-form":"SectionHeader_for-form__3ExLj","for-table":"SectionHeader_for-table__lGcJH"}},103:function(e,t,s){e.exports={input:"CopyButton_input__3hCyN bootstrap_form_form-control__2cIvr","copy-button":"CopyButton_copy-button__3bOX4 c-button_c-button--secondary__3AzmY","is-copied":"CopyButton_is-copied__3aA5L",button__icon:"CopyButton_button__icon__3erfG c-button_c-button__icon--before__HExum"}},1036:function(e,t,s){},1037:function(e,t,s){"use strict";s.r(t);var n={};s.r(n),s.d(n,"DASHBOARD",(function(){return N})),s.d(n,"DATA",(function(){return A})),s.d(n,"ALLOCATIONS",(function(){return T})),s.d(n,"APPLICATIONS",(function(){return C})),s.d(n,"HISTORY",(function(){return k})),s.d(n,"ACCOUNT",(function(){return L})),s.d(n,"TICKETS",(function(){return P})),s.d(n,"UI",(function(){return M}));var o=s(1),r=s.n(o),a=s(35),i=s.n(a),c=s(29);const l={basePath:""};var d=r.a.createContext(l),u=s(14),m=s(135),j=s.n(m),b=s(232);var p=()=>{const{basePath:e}=Object(o.useContext)(d),t=()=>{const e=j.a.get("tapis-token");if(e)return JSON.parse(e)},{data:s,refetch:n}=Object(u.useQuery)("tapis-token",t,{initialData:()=>t()});return{basePath:e,accessToken:s,setAccessToken:async e=>{var t;if(!e)return j.a.remove("tapis-token"),void await n();const s=new Date(null!==(t=e.expires_at)&&void 0!==t?t:0);j.a.set("tapis-token",JSON.stringify(e),{expires:s}),await n()},claims:null!==s&&void 0!==s&&s.access_token?Object(b.a)(null===s||void 0===s?void 0:s.access_token):{}}},h=s(0);var v=e=>{let{token:t,basePath:s,children:n}=e;const o={basePath:s},r=new u.QueryClient;return Object(h.jsx)(d.Provider,{value:o,children:Object(h.jsx)(u.QueryClientProvider,{client:r,children:n})})},x=s(233),O=s.n(x),f=s(1102),y=s(234);s(88);s(1103),s(1072),s(1073),s(1074);var _=s(1075);s(287);const g=e=>{let{placement:t,className:s}=e;return Object(h.jsx)("div",{className:"loading-icon ".concat(s),"data-testid":"loading-spinner",children:Object(h.jsx)(_.a,{className:t})})};g.defaultProps={placement:"section",className:""};var S=g;const N="This page allows you to monitor your job status, get help with tickets, and view the status of the High Performance Computing (HPC) systems.",A="This page allows you to upload and manage your files.",T="This page allows you to monitor the status of allocations on the HPC systems and view a breakdown of team usage.",C="This page allows you to submit jobs to the HPC systems or access Cloud services using a variety of applications.",k="This page allows you to monitor a log of all previous job submissions.",L="This page allows you to manage your account profile, change your password and view software licenses.",P="This page allows you to submit a help request via an RT Ticket.",M="This hidden page allows developers to review UI components in isolation.";var I=s(235),w=s.n(I);s(288);function E(e){let{children:t,className:s,routeName:r,welcomeText:a}=e;const i=a||n[r],c=r||i,l=i&&Object(h.jsx)(Je,{messageName:c,children:i}),d=qe(r)||t.length>0,u="has-message";return Object(o.useEffect)((()=>{d?document.body.classList.add(u):document.body.classList.remove(u)}),[d]),Object(h.jsxs)("aside",{className:"".concat(w.a.root," ").concat(s),children:[l,t]})}E.defaultProps={children:"",className:"",routeName:"",welcomeText:""};var D=E,F=s(162),q=s.n(F),R=s(236),J=s.n(R);const B={oneRow:"one-row",oneColumn:"one-column",twoColumn:"two-column"};Object.keys(B);function Q(e){let{className:t,children:s,layoutName:n,shouldScroll:o,shouldDebugLayout:r,tagName:a}=e,i="";const c=["styles.root"],l=B[n],d=a;return o&&c.push(q.a["should-scroll"]),r&&c.push(q.a["should-debug-layout"]),l&&c.push(J.a[l]),i=c.join(" "),Object(h.jsx)(d,{className:"".concat(t," ").concat(i),children:s})}Q.defaultProps={className:"",shouldScroll:!1,shouldDebugLayout:!1,tagName:"div"};var U=Q,V=s(101),W=s.n(V);function H(e){let{bodyClassName:t,children:s,className:n,content:r,contentClassName:a,contentLayoutName:i,contentShouldScroll:c,header:l,headerActions:d,headerClassName:u,manualContent:m,manualHeader:j,messages:b,messagesClassName:p,routeName:v,welcomeMessageText:x}=e;const O=l||u||d;if(m&&(r||a||i||c))throw new Error("When passing `manualContent`, the following props are ineffectual: `content`, `contentClassName`, `contentLayoutName`, `contentShouldScroll`");if(j&&(l||u||d))throw new Error("When passing `manualHeader`, the following props are ineffectual: `header`, `headerClassName`, `headerActions`");return Object(o.useEffect)((()=>(t&&document.body.classList.add(t),function(){t&&document.body.classList.remove(t)})),[t]),Object(h.jsxs)("section",{className:"".concat(n," ").concat(W.a.root),children:[Object(h.jsx)(D,{className:W.a.messages,routeName:v,className:p,welcomeText:x,children:b}),j?Object(h.jsx)(h.Fragment,{children:j}):O&&Object(h.jsx)(X,{className:"".concat(u," ").concat(W.a.header),actions:d,children:l}),m?Object(h.jsxs)(h.Fragment,{children:[m,s]}):Object(h.jsxs)(U,{tagName:"main",className:"".concat(a," ").concat(W.a.content),layoutName:i||"oneRow",shouldScroll:c,children:[r,s]})]})}H.defaultProps={bodyClassName:"",children:"",className:"",content:"",contentClassName:"",contentLayoutName:"",contentShouldScroll:!1,header:"",headerActions:"",headerClassName:"",manualContent:void 0,manualHeader:void 0,messages:"",messagesClassName:"",routeName:"",welcomeMessageText:""};var z=s(102),Y=s.n(z);function G(e){let{actions:t,children:s,className:n,isForForm:o,isForTable:r}=e,a="";const i=[Y.a.root],c=o||r?"h3":"h2";return o&&i.push(Y.a["for-form"]),r&&i.push(Y.a["for-table"]),a=i.join(" "),Object(h.jsxs)("header",{className:"".concat(a," ").concat(n),children:[s&&Object(h.jsx)(c,{className:Y.a.heading,children:s}),t]})}G.defaultProps={actions:"",className:"",children:"",isForForm:!1,isForTable:!1};var X=G,Z=(s(84),s(237));s(292);const $=e=>{let{isLoading:t}=e;return t?Object(h.jsx)("tr",{className:"-status",children:Object(h.jsx)("td",{children:Object(h.jsx)(S,{placement:"inline"})})}):null},K=e=>{let{display:t,noDataText:s}=e;return t?Object(h.jsx)("tr",{className:"-status",children:Object(h.jsx)("td",{children:Object(h.jsx)("span",{className:"-status__message",children:s})})}):null},ee=e=>{let{tableColumns:t,tableData:s,onInfiniteScroll:n,isLoading:o,className:a,noDataText:i,getRowProps:c,columnMemoProps:l}=e;const d=r.a.useMemo((()=>t),[l,t]),u=r.a.useMemo((()=>s),[s]),{getTableProps:m,getTableBodyProps:j,headerGroups:b,rows:p,prepareRow:v}=Object(Z.useTable)({columns:d,data:u});return Object(h.jsxs)("table",{...m(),className:"".concat(a," InfiniteScrollTable"),children:[Object(h.jsx)("thead",{children:b.map((e=>Object(h.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(h.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")})))})))}),Object(h.jsxs)("tbody",{...j(),onScroll:e=>{let{target:t}=e;t.scrollHeight-t.scrollTop===t.clientHeight&&t.scrollTop>0&&n(s.length)},children:[p.map((e=>(v(e),Object(h.jsx)("tr",{...e.getRowProps(),...c(e),children:e.cells.map((e=>Object(h.jsx)("td",{...e.getCellProps({className:e.column.className}),children:e.render("Cell")})))})))),Object(h.jsx)($,{isLoading:o}),Object(h.jsx)(K,{display:!o&&0===s.length,noDataText:i})]})]})};ee.defaultProps={onInfiniteScroll:e=>{},isLoading:!1,className:"",noDataText:"",getRowProps:e=>{},columnMemoProps:[]};var te=s(1076),se=s(1077),ne=s(1078),oe=s(1079);s(293);const re=e=>{let{children:t,className:s,name:n}=e;const o="icon icon-".concat(n),r=s?[s,o].join(" "):o,a=t;return Object(h.jsx)("i",{className:r,role:"img","aria-label":a})};re.defaultProps={children:"",className:""};var ae=re,ie=(s(294),s(136)),ce=s.n(ie);const le=e=>{let{className:t,detail:s,message:n}=e;const[r,a]=Object(o.useState)(!1),i=Object(o.useCallback)((()=>{a(!r)}),[r,a]);return Object(h.jsxs)(te.a,{className:ce.a.container,className:t,tag:"div",children:[Object(h.jsxs)(se.a,{className:ce.a.summary,onClick:i,tag:"div",children:[Object(h.jsx)("strong",{className:ce.a.header,children:s}),Object(h.jsx)(ae,{name:r?"collapse":"expand"})]}),Object(h.jsx)(ne.a,{isOpen:r,children:Object(h.jsx)(oe.a,{children:n})})]})};le.defaultProps={className:""};var de=s(51),ue=s(72),me=s.n(ue);const je="For a <(Section)Message> to use `canDismiss`, `scope` must equal `section`.",be='In a <(Section|Inline)Message> `type="warn"` is deprecated. Use `type="warning"` instead.',pe='A <Message> without a `scope` should become an <InlineMessage>. (If <Message> must be used, then explicitely set `scope="inline"`.)',he={info:{iconName:"conversation",className:"is-info",iconText:"Notice"},success:{iconName:"approved-reverse",className:"is-success",iconText:"Notice"},warning:{iconName:"alert",className:"is-warn",iconText:"Warning"},error:{iconName:"alert",className:"is-error",iconText:"Error"}};he.warn=he.warning;Object.keys(he);const ve={inline:{className:"is-scope-inline",role:"status",tagName:"span"},section:{className:"is-scope-section",role:"status",tagName:"p"}},xe=(Object.keys(ve),e=>{let{children:t,className:s,onDismiss:n,canDismiss:o,isVisible:r,scope:a,type:i}=e;const c=he[i],l=ve[a||"inline"],{iconName:d,iconText:u,className:m}=c,{role:j,tagName:b,className:p}=l,v="section"===a;o&&!v&&console.error(je),"warn"===i&&console.info(be),a||console.info(pe);const x=[];x.push(m),x.push(p);const O=["container",...x].map((e=>me.a[e])).join(" "),f={...de.a.defaultProps,unmountOnExit:!0,baseClass:"",timeout:0};return Object(h.jsxs)(de.a,{...f,tag:b,className:"".concat(s," ").concat(O),role:j,in:r,children:[Object(h.jsx)(ae,{className:"".concat(me.a.icon," ").concat(me.a["type-icon"]),name:d,children:u}),Object(h.jsx)("span",{className:me.a.text,"data-testid":"text",children:t}),o&&v?Object(h.jsx)("button",{type:"button",className:me.a["close-button"],"aria-label":"Close",onClick:n,children:Object(h.jsx)(ae,{className:"".concat(me.a.icon," ").concat(me.a["close-icon"]),name:"close"})}):null]})});xe.defaultProps={className:"",canDismiss:!1,isVisible:!0,onDismiss:()=>{},scope:""};var Oe=xe;const fe=e=>{const t={...Oe.defaultProps,...e,canDismiss:!1,scope:"inline"};return Object(h.jsx)(Oe,{...t})};fe.defaultProps=Oe.defaultProps;const ye=e=>{const[t,s]=Object(o.useState)(!0),n=Object(o.useCallback)((()=>{s(!t)}),[t]),r={...Oe.defaultProps,...e,isVisible:t,onDismiss:n,scope:"section"};return Object(h.jsx)(Oe,{...r})};ye.defaultProps=Oe.defaultProps;var _e=ye,ge=s(73),Se=s.n(ge);const Ne={vertical:"is-vert",horizontal:"is-horz"},Ae="vertical",Te=(Object.keys(Ne),{compact:"is-narrow",default:"is-wide"}),Ce="default",ke=(Object.keys(Te),e=>{let{value:t}=e;return 0===t.length?Object(h.jsx)("dd",{className:Se.a.value,children:Object(h.jsx)("i",{children:"None"})}):Object(h.jsx)("dl",{children:t.map(((e,t)=>Object(h.jsxs)("div",{className:Se.a["array-entry"],children:[Object(h.jsx)("dt",{className:Se.a.key,children:Object(h.jsx)("i",{children:t})}),Object(h.jsx)("dd",{className:Se.a.value,"data-testid":"value",children:Object(h.jsx)(Le,{value:e})})]},Object(f.a)())))})}),Le=e=>{let{value:t}=e;return void 0===t?Object(h.jsx)("i",{children:"Undefined"}):Array.isArray(t)?Object(h.jsx)(ke,{value:t}):t instanceof Set?Object(h.jsx)(ke,{value:Array.from(t)}):"object"===typeof t?Object(h.jsx)(Pe,{data:t}):"string"===typeof t?Object(h.jsx)(h.Fragment,{children:t}):Object(h.jsx)(h.Fragment,{children:JSON.stringify(t)})},Pe=e=>{let{className:t,data:s,density:n,direction:o}=e;const a=[];a.push(Te[n||Ce]),a.push(Ne[o||Ae]);const i=["container",...a].map((e=>Se.a[e])).join(" "),c=Object.entries(s);return 0===c.length?Object(h.jsx)("div",{children:Object(h.jsx)("i",{children:"Empty object"})}):Object(h.jsx)("dl",{className:"".concat(t," ").concat(i),"data-testid":"list",children:c.map((e=>{let[t,s]=e;return Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("dt",{className:Se.a.key,"data-testid":"key",children:t}),Object(h.jsx)("dd",{className:Se.a.value,"data-testid":"value",children:Object(h.jsx)(Le,{value:s})})]},t)}))})};Pe.defaultProps={className:"",density:Ce,direction:Ae};var Me=Pe,Ie=s(1080),we=s(238),Ee=s.n(we);const De=e=>{let{type:t,onChange:s,...n}=e;const o="multiple"===t;return Object(h.jsx)(Ie.a,{...n,onChange:s,type:"select",className:Ee.a.container,multiple:o,"data-testid":"selector"})};De.defaultProps={type:"single",onChange:()=>{}};var Fe=s(1081);function qe(e){const t={};return t&&t[e]}function Re(e){let{children:t,className:s,messageName:n}=e;const o=qe(n),r={};return Object(h.jsx)(Fe.a,{isOpen:o,toggle:()=>{return e=n,{...r,[e]:!1};var e},color:"secondary",className:s,children:t})}Re.defaultProps={className:""};var Je=Re,Be=s(239),Qe=s.n(Be);function Ue(e){let{children:t,type:s,className:n,shouldTruncate:o}=e,r="root is-".concat(s);return o&&(r+=" should-truncate"),Object(h.jsx)("span",{className:"".concat(Qe.a[r]," ").concat(n),children:t})}Ue.defaultProps={type:"normal",className:"",shouldTruncate:!0};var Ve=s(121),We=s(89),He=s.n(We);const ze=e=>{let{value:t,placeholder:s}=e;const[n,r]=Object(o.useState)(!1),a=Object(o.useCallback)((()=>{r(!0);const e=setTimeout((()=>{r(!1),clearTimeout(e)}),1150)}),[r,1.15]),i=!t||0===t.length;return Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("div",{className:"input-group-prepend",children:Object(h.jsx)(Ve.CopyToClipboard,{text:t,children:Object(h.jsxs)(y.a,{className:"".concat(He.a["copy-button"]," ").concat(n?He.a["is-copied"]:""),style:{"--transition-duration":"".concat(.15,"s")},onClick:a,disabled:i,type:"button",children:[Object(h.jsx)(ae,{name:n?"approved-reverse":"link",className:He.a.button__icon}),Object(h.jsx)("span",{className:He.a.button__text,children:"Copy"})]})})}),Object(h.jsx)("input",{type:"text",onChange:e=>{e.preventDefault()},value:t,className:"form-control ".concat(He.a.input),placeholder:s,"data-testid":"input",readOnly:!0})]})};ze.defaultProps={value:"",placeholder:""};var Ye=s(240),Ge=s(163),Xe=s.n(Ge);const Ze=e=>{let{className:t,children:s}=e;const[n,r]=Object(o.useState)(!1),a=Object(o.useCallback)((()=>{r(!n)}),[n,r]),{height:i,ref:c}=Object(Ye.a)(),l=!(!c||!c.current)&&c.current.scrollHeight>i;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"".concat(n?Xe.a.expanded:Xe.a.clamped," ").concat(t),ref:c,children:s}),(l||n)&&Object(h.jsx)(y.a,{color:"link",onClick:a,children:n?"Read Less":"Read More"})]})};Ze.defaultProps={className:""};var $e=s(80),Ke=s.n($e);const et=e=>{let{number:t,callback:s,current:n}=e;return Object(h.jsx)("div",{className:Ke.a["page-root"],children:Object(h.jsx)(y.a,{className:"".concat(Ke.a.page," ").concat(t===n?Ke.a.current:""),onClick:()=>s(t),children:t})})},tt=e=>{let t,s,{pages:n,current:o,callback:r,spread:a}=e;if(1===n)s=0,t=1;else if(n>2&&n<=a)t=2,s=n-1;else if(n>a&&o<=4)t=2,s=a-1;else if(n>a&&o>n-(a-2))t=n-(a-2),s=n-1;else{const e=Math.floor((a-2)/2);t=o-e,s=o+e}const i=s-t+1,c=i>0?Array(i).fill().map(((e,s)=>t+s)):[];return Object(h.jsxs)("div",{className:Ke.a.root,children:[Object(h.jsx)(y.a,{color:"link",className:Ke.a.root,onClick:()=>r(o-1),disabled:1===o,children:Object(h.jsx)("span",{children:"< Previous"})}),Object(h.jsx)(et,{number:1,callback:r,current:o}),c[0]>2&&Object(h.jsx)("span",{children:"..."}),c.map((e=>Object(h.jsx)(et,{number:e,current:o,callback:r},e))),c[c.length-1]<n-1&&Object(h.jsx)("span",{children:"..."}),n>1&&Object(h.jsx)(et,{number:n,callback:r,current:o}),Object(h.jsx)(y.a,{color:"link",className:Ke.a.endcap,onClick:()=>r(o+1),disabled:o===n,children:Object(h.jsx)("span",{children:"Next >"})})]})};tt.defaultProps={spread:11};var st=s(34);var nt=function(e){let{children:t,...s}=e;const{accessToken:n}=p();return Object(h.jsx)(st.b,{...s,render:e=>{let{location:s}=e;return n?t:Object(h.jsx)(st.a,{to:{pathname:"/login",state:{from:s}}})}})},ot=s(103),rt=s.n(ot);const at=e=>{let{value:t,className:s}=e;const[n,r]=Object(o.useState)(!1),a=Object(o.useCallback)((()=>{r(!0);const e=setTimeout((()=>{r(!1),clearTimeout(e)}),1150)}),[r,1.15]),i=!t||0===t.length;return Object(h.jsx)(Ve.CopyToClipboard,{text:t,children:Object(h.jsxs)(y.a,{className:"".concat(rt.a["copy-button"]," ").concat(n?rt.a["is-copied"]:""," ").concat(s),style:{"--transition-duration":"".concat(.15,"s")},onClick:a,disabled:i,type:"button",size:"sm",children:[Object(h.jsx)(ae,{name:n?"approved-reverse":"copy",className:rt.a.button__icon}),Object(h.jsx)("span",{className:rt.a.button__text,children:"Copy"})]})})};at.defaultProps={value:"",className:""};var it=at,ct=s(1082),lt=s(1083),dt=s(1084),ut=s(1085),mt=s(87),jt=s.n(mt),bt=s(15);var pt=e=>{let{name:t,label:s,required:n,description:o,isHidden:r=!1,as:a}=e;const[,i]=Object(bt.i)(t);return Object(h.jsx)(ct.a,{children:Object(h.jsxs)("span",{className:r?jt.a.hidden:"",children:[Object(h.jsxs)(lt.a,{className:"form-field__label",size:"sm",style:{display:"flex",alignItems:"center"},htmlFor:t,children:[s,n&&!r?Object(h.jsx)(dt.a,{color:"danger",style:{marginLeft:"10px"},children:"Required"}):null]}),Object(h.jsx)(bt.b,{name:t,as:a,id:t}),i.error&&Object(h.jsx)(ut.a,{className:jt.a["form-field__help"],color:"danger",children:i.error}),o&&!i.error&&Object(h.jsx)(ut.a,{className:jt.a["form-field__help"],color:"muted",children:o})]})})};const ht=e=>{let{name:t,label:s,required:n,description:o,...r}=e;return Object(h.jsx)(pt,{name:t,label:s,required:n,description:o,isHidden:r.type&&"hidden"===r.type,as:e=>Object(h.jsx)(Ie.a,{bsSize:"sm",...r,...e})})};var vt=r.a.memo(ht),xt=s(137),Ot=s.n(xt);function ft(e,t,s,n){const{setValues:o,validateForm:r,validateOnChange:a,setFieldValue:i,values:c}=e;if(void 0===s){const e=function(e,t,s){const n=Ot.a.clone(e);let o=n,r=0;const a=Ot.a.toPath(t);for(;r<a.length-1;r++){const t=a[r],s=Object(bt.f)(e,a.slice(0,r+1));if(s&&(Object(bt.h)(s)||Array.isArray(s)))o=o[t]=Ot.a.clone(s);else{const e=a[r+1];o=o[t]=Object(bt.g)(e)&&Number(e)>=0?[]:{}}}if((0===r?e:o)[a[r]]===s)return e;o[a[r]]=void 0===s?void 0:s;0===r&&void 0===s&&(n[a[r]]=void 0);return n}(c,t,void 0);o(e);(void 0===n?a:n)&&r(e)}else i(t,s,n)}var yt=e=>{let{name:t,label:s,required:n,description:o,children:r,...a}=e;const i=Object(bt.j)();return Object(h.jsx)(pt,{name:t,label:s,required:n,description:o,as:e=>{const{onChange:s,...n}=e;return Object(h.jsx)(Ie.a,{bsSize:"sm",type:"select",onChange:e=>{ft(i,t,""===e.target.value?void 0:e.target.value)},...a,...n,children:r})}})},_t=s(164),gt=s.n(_t);var St=e=>{let{name:t,label:s,required:n,description:o,...r}=e;return Object(h.jsxs)(ct.a,{check:!0,children:[Object(h.jsxs)(lt.a,{check:!0,className:"form-field__label ".concat(gt.a.nospace),size:"sm",children:[Object(h.jsx)(bt.b,{name:t,as:e=>{var t;return Object(h.jsx)(Ie.a,{bsSize:null!==(t=r.bsSize)&&void 0!==t?t:"sm",type:"checkbox",...r,...e,checked:e.value})}}),s]}),Object(h.jsx)(ut.a,{className:"form-field__help ".concat(gt.a.nospace),color:"muted",children:o})]})},Nt=(s(1086),s(1104),s(5));var At=(e,t,s,n)=>{const o={};n&&(o["X-Tapis-Token"]=n);return new t(new e.Configuration({basePath:s,headers:o}))};var Tt=async e=>{try{return await e()}catch(t){if(t.json){throw await t.json()}throw t}};s(243);s(244);var Ct=e=>{let{isLoading:t,error:s,children:n,className:o=""}=e;return t?Object(h.jsx)("div",{className:o,children:Object(h.jsx)(S,{})}):s?Object(h.jsx)("div",{className:o,children:Object(h.jsx)(Oe,{canDismiss:!1,type:"error",scope:"inline",children:null!==(r=s.message)&&void 0!==r?r:s})}):Object(h.jsx)("div",{className:o,children:n});var r},kt=s(138),Lt=s.n(kt);var Pt=e=>{var t;let{isLoading:s,error:n,success:o,children:r,className:a="",reverse:i=!1}=e;return Object(h.jsxs)("div",{className:"".concat(a," ").concat(Lt.a.wrapper," ").concat(i&&Lt.a.reverse),children:[r,s&&Object(h.jsx)(S,{className:Lt.a["loading-spinner"],placement:"inline"}),n?Object(h.jsx)(Oe,{canDismiss:!1,type:"error",scope:"inline",children:null!==(t=null===n||void 0===n?void 0:n.message)&&void 0!==t?t:n}):o&&Object(h.jsx)(Oe,{canDismiss:!1,type:"success",scope:"inline",children:o})]})};s(245),s(55);s(139),s(165),s(166),s(90);var Mt=s(9);s(140);s(125);var It=(e,t,s)=>{const n=At(Nt.Systems,Nt.Systems.SystemsApi,t,s);return Tt((()=>n.getSystems(e)))};var wt=(e,t,s)=>{const n=At(Nt.Systems,Nt.Systems.SystemsApi,t,s);return Tt((()=>n.getSystem(e)))};var Et=(e,t)=>{const s=At(Nt.Systems,Nt.Systems.SchedulerProfilesApi,e,t);return Tt((()=>s.getSchedulerProfiles()))};var Dt={create:"systems/create",list:"systems/list",details:"systems/details",listSchedulerProfiles:"systems/listScehdulerProfiles"};const Ft={};var qt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{accessToken:s,basePath:n}=p();return Object(u.useQuery)([Dt.list,e,s],(()=>It(e,n,(null===s||void 0===s?void 0:s.access_token)||"")),{...t,enabled:!!s})};var Rt=function(e){const{accessToken:t,basePath:s}=p();return Object(u.useQuery)([Dt.details,e,t],(()=>{var n;return wt(e,s,null!==(n=null===t||void 0===t?void 0:t.access_token)&&void 0!==n?n:"")}),{enabled:!!t})};var Jt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{accessToken:t,basePath:s}=p();return Object(u.useQuery)([Dt.listSchedulerProfiles,t],(()=>Et(s,(null===t||void 0===t?void 0:t.access_token)||"")),{...e,enabled:!!t})};var Bt=e=>{let{systemId:t}=e;const{data:s,isLoading:n,error:o}=Rt({systemId:t,select:"allAttributes"}),r=null===s||void 0===s?void 0:s.result;return Object(h.jsxs)(Ct,{isLoading:n,error:o,children:[Object(h.jsx)("h3",{children:null===r||void 0===r?void 0:r.id}),r&&Object(h.jsx)(us,{tabs:{Details:Object(h.jsx)(Me,{data:r}),JSON:Object(h.jsx)(ns,{json:r})}})]})};s(141);s(168);s(1007);var Qt=s(105),Ut=s.n(Qt);var Vt=e=>{let{left:t,right:s,top:n,bottom:o,constrain:r}=e;return Object(h.jsxs)("div",{className:"".concat(Ut.a["layout-root"]," ").concat(r?Ut.a.constrain:""),children:[n,Object(h.jsxs)("div",{className:"".concat(Ut.a["layout-row"]," ").concat(r?Ut.a.constrain:""),children:[t,s]}),o]})},Wt=s(91),Ht=s.n(Wt);const zt=e=>{let{children:t,type:s}=e;return Object(h.jsx)("div",{className:s&&Ht.a[s],children:Object(h.jsx)(X,{children:t})})},Yt=e=>{let{children:t}=e;return Object(h.jsx)("div",{className:Ht.a.nav,children:t})},Gt=e=>{let{children:t,constrain:s}=e;return Object(h.jsx)("div",{className:"".concat(Ht.a.body," ").concat(s?Ht.a.constrain:""),children:Object(h.jsx)("div",{className:Ht.a.detail,children:t})})};var Xt=s(106),Zt=s.n(Xt);var $t=e=>{let{title:t,note:s,open:n,requiredText:r,className:a,children:i,isCollapsable:c=!0}=e;const[l,d]=Object(o.useState)(null!==n&&void 0!==n&&n),u=Object(o.useCallback)((()=>{d(!l)}),[l,d]);return Object(h.jsxs)("div",{className:a,children:[Object(h.jsxs)("div",{className:Zt.a.header,children:[Object(h.jsxs)("div",{className:Zt.a.title,children:[t,r&&Object(h.jsx)(dt.a,{color:"danger",style:{marginLeft:"10px",marginBottom:"10px"},children:r})]}),Object(h.jsxs)("div",{className:Zt.a.controls,children:[Object(h.jsx)("div",{children:null!==s&&void 0!==s?s:""}),c&&Object(h.jsx)(y.a,{color:"link",className:Zt.a.expand,size:"sm",onClick:u,children:Object(h.jsx)(ae,{name:l?"collapse":"expand"})})]})]}),Object(h.jsx)(ne.a,{isOpen:l||!c,children:i})]})},Kt=s(169),es=s.n(Kt);const ts=e=>{const t=JSON.parse(JSON.stringify(e));return Object.entries(t).forEach((e=>{let[s,n]=e;if(Array.isArray(n))0===n.length&&delete t[s];else if("object"!==typeof n)void 0===n&&delete t[s];else{const e=ts(n);0===Object.entries(e).length?delete t[s]:t[s]=e}})),t},ss=e=>{if(void 0!==e){if(Array.isArray(e))return e.map((e=>ss(e)));if(e instanceof Set)return Array.from(e).map((e=>ss(e)));if("object"===typeof e){const t={};return Object.entries(e).forEach((e=>{let[s,n]=e;t[s]=null===n?null:ss(n)})),t}return JSON.parse(JSON.stringify(e))}};var ns=e=>{let{json:t,className:s}=e;const[n,r]=Object(o.useState)(!1),a=Object(o.useCallback)((()=>{r(!n)}),[r,n]),i=Object(o.useMemo)((()=>JSON.stringify(n?ts(ss(t)):ss(t),null,2)),[t,n]);return Object(h.jsxs)("div",{className:s,children:[Object(h.jsxs)("div",{className:es.a.controls,children:[Object(h.jsx)(ct.a,{check:!0,children:Object(h.jsxs)(lt.a,{check:!0,size:"sm",className:"form-field__label",children:[Object(h.jsx)(Ie.a,{type:"checkbox",onChange:a}),"Simplified"]})}),Object(h.jsx)(it,{value:i})]}),Object(h.jsx)(Ie.a,{type:"textarea",value:i,className:es.a.json,rows:"20",disabled:!0})]})},os=s(1087),rs=s(1088),as=s(1089),is=s(1090),cs=s(1091),ls=s(142),ds=s.n(ls);var us=e=>{var t;let{tabs:s,className:n=""}=e;const r=Object.keys(s),[a,i]=Object(o.useState)(null!==(t=r[0])&&void 0!==t?t:""),c=e=>"".concat(ds.a.tab," ").concat(a===e?ds.a.active:"");return Object(h.jsxs)("div",{className:n,children:[Object(h.jsx)(os.a,{tabs:!0,children:r.map((e=>Object(h.jsx)(rs.a,{className:c(e),children:Object(h.jsx)(as.a,{onClick:()=>i(e),"data-testid":"tab-".concat(e),children:e})},"tab-".concat(e))))}),Object(h.jsx)(is.a,{activeTab:a,children:r.map((e=>Object(h.jsx)(cs.a,{tabId:e,className:ds.a.pane,children:s[e]},"tabcontent-".concat(e))))})]})},ms=s(92),js=s.n(ms);const bs=e=>{let{to:t,icon:s,children:n}=e;return Object(h.jsx)(c.c,{to:t,className:js.a["nav-link"],activeClassName:js.a.active,exact:"/"===t,children:Object(h.jsxs)("div",{className:js.a["nav-content"],children:[s&&Object(h.jsx)(ae,{name:s}),Object(h.jsx)("span",{className:js.a["nav-text"],children:n})]})})};var ps=e=>{let{children:t}=e;return Object(h.jsx)("div",{className:"".concat(js.a["nav-list"]),children:t})},hs=s(1092);var vs=()=>{const{accessToken:e}=p();return Object(h.jsx)("div",{className:O.a.root,children:Object(h.jsxs)(ps,{children:[Object(h.jsx)(bs,{to:"/",icon:"dashboard",children:"Dashboard"}),!e&&Object(h.jsx)(bs,{to:"/login",icon:"user",children:"Login"}),e&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(bs,{to:"/systems",icon:"data-files",children:"Systems"}),Object(h.jsx)(bs,{to:"/apps",icon:"applications",children:"Apps"}),Object(h.jsx)(bs,{to:"/jobs",icon:"jobs",children:"Jobs"}),Object(h.jsx)(hs.a,{})]})]})})};var xs=(e,t,s)=>{const n={reqCreateToken:{username:e,password:t,grant_type:"password"}},o=At(Nt.Authenticator,Nt.Authenticator.TokensApi,s,null);return Tt((()=>o.createToken(n)))};var Os={login:"authenticator/login"};var fs=()=>{const{setAccessToken:e,basePath:t}=p(),{mutate:s,isLoading:n,isError:o,isSuccess:r,error:a}=Object(u.useMutation)([Os.login,t],(e=>{let{username:s,password:n}=e;return xs(s,n,t)}),{onSuccess:t=>{var s;e(null===t||void 0===t||null===(s=t.result)||void 0===s?void 0:s.access_token)}});return{isLoading:n,isError:o,isSuccess:r,error:a,login:(e,t)=>s({username:e,password:t}),logout:()=>e(null)}};var ys=(e,t,s)=>{const n=At(Nt.Apps,Nt.Apps.ApplicationsApi,t,s);return Tt((()=>n.getApps(e)))};var _s=(e,t,s)=>{const n=At(Nt.Apps,Nt.Apps.ApplicationsApi,t,s);return Tt((()=>n.getApp(e)))};var gs={list:"apps/list",create:"apps/create"};const Ss={select:"jobAttributes,version"};var Ns=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{accessToken:s,basePath:n}=p();return Object(u.useQuery)([gs.list,e,s],(()=>{var t;return ys(e,n,null!==(t=null===s||void 0===s?void 0:s.access_token)&&void 0!==t?t:"")}),{...t,enabled:!!s})};var As=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{accessToken:s,basePath:n}=p();return Object(u.useQuery)([gs.list,e,s],(()=>{var t;return _s({...e},n,null!==(t=null===s||void 0===s?void 0:s.access_token)&&void 0!==t?t:"")}),{...t,enabled:!!s})};var Ts=(e,t,s)=>{const n=At(Nt.Apps,Nt.Apps.ApplicationsApi,t,s);return Tt((()=>(console.log("Creating app version v2",e),n.createAppVersion({reqPostApp:e}))))};var Cs=()=>{const{basePath:e,accessToken:t}=p(),s=(null===t||void 0===t?void 0:t.access_token)||"",{mutate:n,isLoading:r,isError:a,isSuccess:i,data:c,error:l,reset:d}=Object(u.useMutation)([gs,e,s],(t=>Ts(t,e,s)));return Object(o.useEffect)((()=>d()),[d]),{isLoading:r,isError:a,isSuccess:i,data:c,error:l,reset:d,submit:e=>n(e)}};var ks=()=>{var e;const{data:t,isLoading:s,error:n}=Ns({},{refetchOnWindowFocus:!1}),{url:o}=Object(st.i)(),r=null!==(e=null===t||void 0===t?void 0:t.result)&&void 0!==e?e:[];return console.log(o),Object(h.jsx)(Ct,{isLoading:s,error:n,children:Object(h.jsx)(ps,{children:r.length?r.map((e=>Object(h.jsx)(bs,{to:"/apps/".concat(e.id,"/").concat(e.version),icon:"applications",children:"".concat(e.id," v").concat(e.version)},e.id))):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("i",{children:"No templates found"})})})})};var Ls=(e,t,s)=>{const n=At(Nt.Jobs,Nt.Jobs.JobsApi,t,s);return Tt((()=>n.getJobList(e)))};var Ps=(e,t,s)=>{const n=At(Nt.Jobs,Nt.Jobs.JobsApi,t,s);return Tt((()=>n.getJob(e)))};var Ms=(e,t,s)=>{const n=At(Nt.Jobs,Nt.Jobs.JobsApi,t,s);return Tt((()=>n.submitJob({reqSubmitJob:e})))};var Is={list:"jobs/list",details:"jobs/details",submit:"jobs/submit"};const ws={orderBy:"created(desc)"};var Es=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ws,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{accessToken:s,basePath:n}=p();return Object(u.useQuery)([Is.list,e,s],(()=>{var t;return Ls(e,n,null!==(t=null===s||void 0===s?void 0:s.access_token)&&void 0!==t?t:"")}),{...t,enabled:!!s})};var Ds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{accessToken:s,basePath:n}=p(),o={jobUuid:e};return Object(u.useQuery)([Is.details,o,s],(()=>{var e;return Ps(o,n,null!==(e=null===s||void 0===s?void 0:s.access_token)&&void 0!==e?e:"")}),{...t,enabled:!!s})};var Fs=(e,t)=>{const{basePath:s,accessToken:n}=p(),r=(null===n||void 0===n?void 0:n.access_token)||"",{mutate:a,isLoading:i,isError:c,isSuccess:l,data:d,error:m,reset:j}=Object(u.useMutation)([Is.submit,e,t,s,r],(e=>Ms(e,s,r)));return Object(o.useEffect)((()=>j()),[j,e,t]),{isLoading:i,isError:c,isSuccess:l,data:d,error:m,reset:j,submit:e=>a(e)}};const qs=e=>{var t,s,n;return null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.fileInputs)||void 0===n?void 0:n.filter((e=>!e.sourceUrl)))&&void 0!==t?t:[]},Rs=e=>{var t,s,n;return(null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.fileInputs)||void 0===n?void 0:n.filter((e=>e.inputMode===Nt.Apps.FileInputModeEnum.Required)))&&void 0!==t?t:[]).map((e=>{return{name:(t=e).name,sourceUrl:t.sourceUrl,targetPath:t.targetPath,description:t.description,autoMountLocal:t.autoMountLocal};var t}))},Js=(e,t)=>{var s,n,o,r,a;const i=((e,t)=>qs(e).filter((e=>e.inputMode===t)))(e,Nt.Apps.FileInputModeEnum.Required);if(i.some((e=>{const s=t.find((t=>t.name===e.name));return!s||!s.sourceUrl})))return!1;const c=qs(e).filter((e=>!e.sourceUrl)),l=null!==(s=t.filter((e=>c.some((t=>e.name===t.name)))))&&void 0!==s?s:[];if(!!l.length&&l.some((e=>!e.sourceUrl)))return!1;const d=null!==(n=null===(o=e.jobAttributes)||void 0===o||null===(r=o.fileInputs)||void 0===r?void 0:r.map((e=>e.name)))&&void 0!==n?n:[];return!(null!==(a=t.filter((e=>!d.some((t=>t===e.name)))))&&void 0!==a?a:[]).some((e=>!e.sourceUrl||!e.targetPath))},Bs=e=>{var t,s,n;return null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.fileInputArrays)||void 0===n?void 0:n.filter((e=>!e.sourceUrls)))&&void 0!==t?t:[]},Qs=e=>{var t,s,n;return(null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.fileInputArrays)||void 0===n?void 0:n.filter((e=>e.inputMode===Nt.Apps.FileInputModeEnum.Required)))&&void 0!==t?t:[]).map((e=>(e=>{var t;return{name:e.name,sourceUrls:null!==(t=e.sourceUrls)&&void 0!==t?t:[],targetDir:e.targetDir,description:e.description}})(e)))},Us=(e,t)=>{var s,n,o,r,a;const i=((e,t)=>Bs(e).filter((e=>e.inputMode===t)))(e,Nt.Apps.FileInputModeEnum.Required);if(i.some((e=>{const s=t.find((t=>t.name===e.name));return!s||(!s.sourceUrls||!s.sourceUrls.length)})))return!1;const c=Bs(e).filter((e=>!e.sourceUrls)),l=null!==(s=t.filter((e=>c.some((t=>e.name===t.name)))))&&void 0!==s?s:[];if(!!l.length&&l.some((e=>!e.sourceUrls)))return!1;const d=null!==(n=null===(o=e.jobAttributes)||void 0===o||null===(r=o.fileInputArrays)||void 0===r?void 0:r.map((e=>e.name)))&&void 0!==n?n:[];return!(null!==(a=t.filter((e=>!d.some((t=>t===e.name)))))&&void 0!==a?a:[]).some((e=>!e.sourceUrls||!e.targetDir))},Vs=(e,t)=>{const s=t.find((t=>t.name===e));if(s)return s.inputMode},Ws=e=>e.map((e=>(e=>({arg:e.arg,description:e.description,include:e.inputMode!==Nt.Apps.ArgInputModeEnum.IncludeOnDemand,name:e.name}))(e)));var Hs=e=>{var t,s,n,o,r,a,i,c,l,d,u,m,j,b,p,h,v,x,O,f,y,_,g,S;let{app:N,systems:A}=e;if(!N)return{};return{name:"".concat(N.id,"-").concat(N.version),description:N.description,appId:N.id,appVersion:N.version,archiveOnAppError:null===(t=null===(s=N.jobAttributes)||void 0===s?void 0:s.archiveOnAppError)||void 0===t||t,archiveSystemId:null===(n=N.jobAttributes)||void 0===n?void 0:n.archiveSystemId,archiveSystemDir:null===(o=N.jobAttributes)||void 0===o?void 0:o.archiveSystemDir,nodeCount:null===(r=N.jobAttributes)||void 0===r?void 0:r.nodeCount,coresPerNode:null===(a=N.jobAttributes)||void 0===a?void 0:a.coresPerNode,jobType:N.jobType,memoryMB:null===(i=N.jobAttributes)||void 0===i?void 0:i.memoryMB,maxMinutes:null===(c=N.jobAttributes)||void 0===c?void 0:c.maxMinutes,isMpi:null===(l=N.jobAttributes)||void 0===l?void 0:l.isMpi,mpiCmd:null===(d=N.jobAttributes)||void 0===d?void 0:d.mpiCmd,cmdPrefix:null===(u=N.jobAttributes)||void 0===u?void 0:u.cmdPrefix,fileInputs:Rs(N),fileInputArrays:Qs(N),parameterSet:{appArgs:Ws(null!==(m=null===(j=N.jobAttributes)||void 0===j||null===(b=j.parameterSet)||void 0===b?void 0:b.appArgs)&&void 0!==m?m:[]),containerArgs:Ws(null!==(p=null===(h=N.jobAttributes)||void 0===h||null===(v=h.parameterSet)||void 0===v?void 0:v.containerArgs)&&void 0!==p?p:[]),schedulerOptions:Ws(null!==(x=null===(O=N.jobAttributes)||void 0===O||null===(f=O.parameterSet)||void 0===f?void 0:f.schedulerOptions)&&void 0!==x?x:[]),archiveFilter:null===(y=N.jobAttributes)||void 0===y||null===(_=y.parameterSet)||void 0===_?void 0:_.archiveFilter,envVariables:null===(g=N.jobAttributes)||void 0===g||null===(S=g.parameterSet)||void 0===S?void 0:S.envVariables}}};var zs=e=>{let{field:t,error:s}=e;return Object(h.jsx)("div",{children:t?Object(h.jsx)("div",{children:t}):Object(h.jsx)(Oe,{type:"error",canDismiss:!1,scope:"inline",children:null!==s&&void 0!==s?s:""})})};var Ys=()=>{const e=r.a.createContext({data:{},add:e=>{},set:e=>{},clear:()=>{}});return{useBuilderContext:()=>Object(o.useContext)(e),Provider:t=>{let{children:s,value:n}=t;const[r,a]=Object(o.useReducer)(((e,t)=>{const{action:s,slice:n}=t;switch(s){case"add":return{...e,...n};case"set":return{...n};case"clear":return{};default:return{...e}}}),{...n});Object(o.useEffect)((()=>{a({action:"set",slice:n})}),[a,n]);const i={data:r,add:e=>a({action:"add",slice:e}),set:e=>a({action:"set",slice:e}),clear:()=>a({action:"clear"})};return Object(h.jsx)(e.Provider,{value:i,children:s})}}};const Gs=r.a.createContext({app:{},systems:[],schedulerProfiles:[]}),{useBuilderContext:Xs,Provider:Zs}=Ys(),$s=e=>{let{value:t,children:s}=e;const{app:n,systems:o,defaultValues:r,schedulerProfiles:a}=t;return Object(h.jsx)(Gs.Provider,{value:{app:n,systems:o,schedulerProfiles:a},children:Zs({value:r,children:s})})};var Ks=()=>{const{data:e,add:t,set:s,clear:n}=Xs(),{app:r,systems:a,schedulerProfiles:i}=Object(o.useContext)(Gs);return{job:e,add:t,set:s,clear:n,app:r,systems:a,schedulerProfiles:i}};const en=()=>{const{app:e}=Ks();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:["Launching ",e.id," v",e.version]}),Object(h.jsx)(vt,{name:"name",required:!0,label:"Name",description:"A name for this job"}),Object(h.jsx)(vt,{name:"description",required:!1,label:"Description",description:"A description of this job"})]})},tn=()=>{const{job:e}=Ks(),{name:t,description:s,appId:n,appVersion:o}=e;return Object(h.jsxs)("div",{children:[Object(h.jsx)(zs,{field:t,error:"A job name is required"},"job-start-name-summary"),Object(h.jsx)(zs,{field:s},"job-start-description-summary"),Object(h.jsx)("div",{children:Object(h.jsxs)("i",{children:["Application: ",n," v",o]})})]})},sn=Mt.d({name:Mt.e().required().min(1).max(64),description:Mt.e()});var nn={id:"start",name:"Job Name",render:Object(h.jsx)(en,{}),summary:Object(h.jsx)(tn,{}),generateInitialValues:e=>{let{job:t}=e;return{name:t.name,description:t.description}},validationSchema:sn};const on=e=>{var t,s;return null!==(t=e.jobAttributes)&&void 0!==t&&t.execSystemId?{source:"app",systemId:null===(s=e.jobAttributes)||void 0===s?void 0:s.execSystemId}:{source:void 0,systemId:void 0}},rn=(e,t,s)=>{var n,o,r;if(null!==(n=t.jobAttributes)&&void 0!==n&&n.execSystemLogicalQueue)return{source:"app",queue:null===(r=t.jobAttributes)||void 0===r?void 0:r.execSystemLogicalQueue};if(e.execSystemId){const t=s.find((t=>t.id===e.execSystemId));if(null!==t&&void 0!==t&&t.batchDefaultLogicalQueue)return{source:"system",queue:t.batchDefaultLogicalQueue}}if(null!==(o=t.jobAttributes)&&void 0!==o&&o.execSystemId){const e=s.find((e=>{var s;return e.id===(null===(s=t.jobAttributes)||void 0===s?void 0:s.execSystemId)}));if(null!==e&&void 0!==e&&e.batchDefaultLogicalQueue)return{source:"app system",queue:e.batchDefaultLogicalQueue}}return{source:void 0,queue:void 0}},an=(e,t,s)=>{var n;if(t.jobType)return{source:"app",jobType:t.jobType};if(null!==e&&void 0!==e&&e.execSystemId){const t=s.find((t=>t.id===e.execSystemId));if(null!==t&&void 0!==t&&t.canRunBatch)return{source:"system",jobType:Nt.Apps.JobTypeEnum.Batch}}if(null!==(n=t.jobAttributes)&&void 0!==n&&n.execSystemId){const e=s.find((e=>{var s;return e.id===(null===(s=t.jobAttributes)||void 0===s?void 0:s.execSystemId)}));if(null!==e&&void 0!==e&&e.canRunBatch)return{source:"app system",jobType:Nt.Apps.JobTypeEnum.Batch}}return{source:"tapis",jobType:Nt.Apps.JobTypeEnum.Fork}};let cn=function(e){return e.Complete="COMPLETE",e.ErrorNoExecSystem="ERROR_NO_EXEC_SYSTEM",e.ErrorExecSystemNotFound="ERROR_EXEC_SYSTEM_NOT_FOUND",e.ErrorExecSystemNoQueues="ERROR_EXEC_SYSTEM_NO_QUEUES",e.ErrorNoQueue="ERROR_NO_QUEUE",e.ErrorQueueNotFound="ERROR_QUEUE_NOT_FOUND",e}({});const ln=(e,t,s)=>{var n,o;const r=on(t);if(!e.execSystemId&&(null===r||void 0===r||!r.systemId))return cn.ErrorNoExecSystem;const a=s.find((t=>{var s;return t.id===(null!==(s=e.execSystemId)&&void 0!==s?s:null===r||void 0===r?void 0:r.systemId)}));if(!a)return cn.ErrorExecSystemNotFound;const i=an(e,t,s);if(e.jobType!==Nt.Apps.JobTypeEnum.Batch&&i.jobType===Nt.Apps.JobTypeEnum.Fork)return cn.Complete;if(null===(n=a.batchLogicalQueues)||void 0===n||!n.length)return cn.ErrorExecSystemNoQueues;const c=rn(e,t,s);if(!e.execSystemLogicalQueue&&!c.queue)return cn.ErrorNoQueue;const l=s.find((t=>{var s;return t.id===(null!==(s=e.execSystemId)&&void 0!==s?s:null===r||void 0===r?void 0:r.systemId)}));return null!==l&&void 0!==l&&null!==(o=l.batchLogicalQueues)&&void 0!==o&&o.some((t=>{var s;return t.name===(null!==(s=e.execSystemLogicalQueue)&&void 0!==s?s:c.queue)}))?cn.Complete:cn.ErrorQueueNotFound},dn=e=>e.charAt(0).toUpperCase()+e.slice(1);var un=s(47),mn=s.n(un);const jn=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.batchLogicalQueues)&&void 0!==t?t:[]},bn=(e,t)=>t?e.find((e=>e.id===t)):void 0,pn=()=>{const{setFieldValue:e,values:t}=Object(bt.j)(),{job:s,app:n,systems:r}=Ks(),[a,i]=Object(o.useState)(jn(bn(r,s.execSystemId))),[c,l]=Object(o.useState)(r),{defaultSystemLabel:d,defaultQueueLabel:u,defaultJobTypeLabel:m,isBatch:j,selectedSystem:b}=Object(o.useMemo)((()=>{const{source:e,systemId:s}=on(n),o=e?"App default (".concat(s,")"):"Please select a system",{source:a,queue:i}=rn(t,n,r),c=a?"".concat(dn(a)," default (").concat(i,")"):"Please select a queue",{source:l,jobType:d}=an(t,n,r);return{defaultSystemLabel:o,defaultQueueLabel:c,defaultJobTypeLabel:"".concat(dn(l)," default (").concat(d,")"),isBatch:(null===t||void 0===t?void 0:t.jobType)===Nt.Apps.JobTypeEnum.Batch||d===Nt.Apps.JobTypeEnum.Batch,selectedSystem:null===t||void 0===t?void 0:t.execSystemId}}),[t,n,r]);return Object(o.useEffect)((()=>{var t;const s=j?r.filter((e=>{var t;return!(null===(t=e.batchLogicalQueues)||void 0===t||!t.length)})):r;l(s),s.some((e=>e.id===b))||e("execSystemId",void 0),j||e("execSystemLogicalQueue",void 0);const o=bn(s,null!==b&&void 0!==b?b:null===(t=n.jobAttributes)||void 0===t?void 0:t.execSystemId),a=jn(o);i(a),e("execSystemLogicalQueue",void 0)}),[r,j,n,b,e,l,i]),Object(h.jsxs)("div",{className:mn.a.item,children:[Object(h.jsxs)(yt,{name:"execSystemId",description:"The execution system for this job",label:"Execution System",required:!0,"data-testid":"execSystemId",children:[Object(h.jsx)("option",{value:void 0,label:d}),c.map((e=>Object(h.jsx)("option",{value:e.id,label:e.id,"data-testid":"execSystemId-".concat(e.id)},"execsystem-select-".concat(e.id))))]}),Object(h.jsxs)(yt,{name:"jobType",label:"Job Type",description:"Jobs can either be Batch or Fork",required:!0,"data-testid":"jobType",children:[Object(h.jsx)("option",{value:void 0,label:m}),Object(h.jsx)("option",{value:Nt.Apps.JobTypeEnum.Batch,label:"Batch"}),Object(h.jsx)("option",{value:Nt.Apps.JobTypeEnum.Fork,label:"Fork"})]}),j&&Object(h.jsxs)(yt,{name:"execSystemLogicalQueue",description:"The batch queue on this execution system",label:"Batch Logical Queue",required:!1,disabled:0===a.length,"data-testid":"execSystemLogicalQueue",children:[Object(h.jsx)("option",{value:void 0,label:u}),a.map((e=>Object(h.jsx)("option",{value:e.name,label:e.name},"queue-select-".concat(e.name))))]})]})},hn=()=>{const{errors:e}=Object(bt.j)(),t=e,s=t.coresPerNode||t.maxMinutes||t.memoryMB||t.nodeCount;return Object(h.jsxs)($t,{title:"Queue Parameters",isCollapsable:!s,children:[Object(h.jsx)(vt,{name:"nodeCount",label:"Node Count",description:"The number of nodes to use for this job",required:!1}),Object(h.jsx)(vt,{name:"coresPerNode",label:"Cores Per Node",description:"The number of cores to use per node",required:!1}),Object(h.jsx)(vt,{name:"memoryMB",label:"Memory, in Megabytes",description:"The amount of memory to use per node in megabytes",required:!1}),Object(h.jsx)(vt,{name:"maxMinutes",label:"Maximum Minutes",description:"The maximum amount of time in minutes for this job",required:!1})]})},vn=()=>{const{values:e}=Object(bt.j)(),t=Object(o.useMemo)((()=>(null===e||void 0===e?void 0:e.jobType)===Nt.Apps.JobTypeEnum.Batch),[e]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Execution Options"}),Object(h.jsx)(pn,{}),t&&Object(h.jsx)(hn,{})]})},xn=()=>{const{job:e,app:t,systems:s}=Ks(),{isMpi:n,mpiCmd:r,cmdPrefix:a}=e,{computedSystem:i,computedQueue:c,computedJobType:l}=Object(o.useMemo)((()=>{var n,o,r;const{execSystemLogicalQueue:a,execSystemId:i,jobType:c}=e;return{computedSystem:null!==i&&void 0!==i?i:null===(n=on(t))||void 0===n?void 0:n.systemId,computedQueue:null!==a&&void 0!==a?a:null===(o=rn(e,t,s))||void 0===o?void 0:o.queue,computedJobType:null!==c&&void 0!==c?c:null===(r=an(e,t,s))||void 0===r?void 0:r.jobType}}),[e,t,s]);return Object(h.jsxs)("div",{children:[Object(h.jsx)(zs,{field:i,error:"An execution system is required"},"execution-system-id-summary"),l===Nt.Apps.JobTypeEnum.Batch&&Object(h.jsx)(zs,{field:c,error:"A logical queue is required"},"execution-system-queue-summary"),Object(h.jsx)(zs,{field:"".concat(n?"MPI Command: ".concat(null!==r&&void 0!==r?r:"system default"):"Command Prefix: ".concat(null!==a&&void 0!==a?a:"system default"))},"execution-mpi-summary")]})},On=Mt.d({execSystemId:Mt.e(),execSystemLogicalQueue:Mt.e(),execSystemExecDir:Mt.e(),execSystemInputDir:Mt.e(),execSystemOutputDir:Mt.e(),jobType:Mt.e(),nodeCount:Mt.c(),coresPerNode:Mt.c(),memoryMB:Mt.c(),maxMinutes:Mt.c(),isMpi:Mt.b(),mpiCmd:Mt.e(),cmdPrefix:Mt.e()});var fn={id:"execution",name:"Execution Options",render:Object(h.jsx)(vn,{}),summary:Object(h.jsx)(xn,{}),generateInitialValues:e=>{let{job:t,app:s,systems:n}=e;return{execSystemId:t.execSystemId,execSystemLogicalQueue:t.execSystemLogicalQueue,jobType:t.jobType,execSystemExecDir:t.execSystemExecDir,execSystemInputDir:t.execSystemInputDir,execSystemOutputDir:t.execSystemOutputDir,nodeCount:t.nodeCount,coresPerNode:t.coresPerNode,memoryMB:t.memoryMB,maxMinutes:t.maxMinutes,isMpi:t.isMpi,mpiCmd:t.mpiCmd,cmdPrefix:t.cmdPrefix}},validateThunk:e=>{let{app:t,systems:s}=e;return e=>{var n,o,r;const{execSystemId:a,execSystemLogicalQueue:i,nodeCount:c,coresPerNode:l,memoryMB:d,maxMinutes:u,jobType:m}=e,j={},b=ln(e,t,s);if(b===cn.ErrorNoExecSystem&&(j.execSystemId="This app does not have a default execution system. You must specify one for this job"),b===cn.ErrorExecSystemNotFound&&(j.execSystemId="The specified exec system cannot be found"),b===cn.ErrorExecSystemNoQueues&&(j.execSystemId="The specified exec system is not capable of batch jobs"),b===cn.ErrorNoQueue&&(j.execSystemLogicalQueue="Neither the application nor the selected system specifies a default queue. You must specify one for this job"),b===cn.ErrorQueueNotFound&&(j.execSystemLogicalQueue="The specified queue cannot be found on the selected system"),m===Nt.Apps.JobTypeEnum.Fork||(null===(n=an(e,t,s))||void 0===n?void 0:n.jobType)===Nt.Apps.JobTypeEnum.Fork)return j;const p=on(t),h=rn(e,t,s),v=s.find((e=>e.id===(null!==a&&void 0!==a?a:p.systemId)));if(null===v||void 0===v||null===(o=v.batchLogicalQueues)||void 0===o||!o.length)return j.execSystemLogicalQueue="The selected system does not have any batch logical queues",j;const x=null===v||void 0===v||null===(r=v.batchLogicalQueues)||void 0===r?void 0:r.find((e=>e.name===(null!==i&&void 0!==i?i:null===h||void 0===h?void 0:h.queue)));return x?(c&&(null!==x&&void 0!==x&&x.maxNodeCount&&c>(null===x||void 0===x?void 0:x.maxNodeCount)&&(j.nodeCount="The maximum number of nodes for this queue is ".concat(null===x||void 0===x?void 0:x.maxNodeCount)),null!==x&&void 0!==x&&x.minNodeCount&&c<(null===x||void 0===x?void 0:x.minNodeCount)&&(j.nodeCount="The minimum number of nodes for this queue is ".concat(null===x||void 0===x?void 0:x.minNodeCount))),l&&(null!==x&&void 0!==x&&x.maxCoresPerNode&&l>(null===x||void 0===x?void 0:x.maxCoresPerNode)&&(j.coresPerNode="The maximum number of cores per node for this queue is ".concat(null===x||void 0===x?void 0:x.maxCoresPerNode)),null!==x&&void 0!==x&&x.minCoresPerNode&&l<(null===x||void 0===x?void 0:x.minCoresPerNode)&&(j.coresPerNode="The minimum number of cores per node for this queue is ".concat(null===x||void 0===x?void 0:x.minCoresPerNode))),d&&(null!==x&&void 0!==x&&x.maxMemoryMB&&d>(null===x||void 0===x?void 0:x.maxMemoryMB)&&(j.memoryMB="The maximum amount of memory for this queue is ".concat(null===x||void 0===x?void 0:x.maxMemoryMB," megabytes")),null!==x&&void 0!==x&&x.minMemoryMB&&d<(null===x||void 0===x?void 0:x.minMemoryMB)&&(j.memoryMB="The minimum amount of memory for this queue is ".concat(null===x||void 0===x?void 0:x.minMemoryMB," megabytes"))),u&&(null!==x&&void 0!==x&&x.maxMinutes&&u>(null===x||void 0===x?void 0:x.maxMinutes)&&(j.maxMinutes="The maximum number of minutes for a job on this queue is ".concat(null===x||void 0===x?void 0:x.maxMinutes)),null!==x&&void 0!==x&&x.minMinutes&&u<(null===x||void 0===x?void 0:x.minMinutes)&&(j.maxMinutes="The minimum number of minutes for a job on this queue is ".concat(null===x||void 0===x?void 0:x.minMinutes))),j):(j.execSystemLogicalQueue="The specified queue does not exist on the selected execution system",j)}},validationSchema:On};const yn=e=>{let{index:t,name:s,argType:n,arrayHelpers:r,inputMode:a}=e;const[i]=Object(bt.i)("".concat(s,".name")),c=Object(o.useMemo)((()=>i.value),[i]);return Object(h.jsxs)($t,{title:c&&c.length?c:n,className:mn.a.item,children:[Object(h.jsx)(vt,{name:"".concat(s,".name"),required:!0,label:"Name",disabled:!!a,description:"The name for this ".concat(n," ").concat(a?"is defined in the application and cannot be changed":"")}),Object(h.jsx)(vt,{name:"".concat(s,".arg"),required:!0,label:"Value",disabled:a===Nt.Apps.ArgInputModeEnum.Fixed,description:"A value for this ".concat(n)}),Object(h.jsx)(vt,{name:"".concat(s,".description"),required:!1,label:"Description",disabled:a===Nt.Apps.ArgInputModeEnum.Fixed,description:"A description for this ".concat(n)}),Object(h.jsx)(St,{name:"".concat(s,".include"),required:!1,label:"Include",disabled:a===Nt.Apps.ArgInputModeEnum.Fixed||a===Nt.Apps.ArgInputModeEnum.Required,description:a===Nt.Apps.ArgInputModeEnum.Fixed||a===Nt.Apps.ArgInputModeEnum.Required?"This ".concat(n," must be included"):"If checked, this ".concat(n," will be included")}),Object(h.jsx)(y.a,{size:"sm",onClick:()=>r.remove(t),children:"Remove"})]},"".concat(n,".").concat(t))},_n=e=>{let{argSpecs:t,name:s,argType:n}=e;const[r]=Object(bt.i)(s),a=Object(o.useMemo)((()=>{var e;return null!==(e=r.value)&&void 0!==e?e:[]}),[r]);return Object(h.jsx)(bt.c,{name:s,render:e=>Object(h.jsxs)("div",{className:mn.a.array,children:[Object(h.jsx)("h3",{children:"".concat(n,"s")}),Object(h.jsx)("div",{className:mn.a["array-group"],children:a.map(((o,r)=>{const a=o.name?Vs(o.name,t):void 0;return Object(h.jsx)(yn,{index:r,arrayHelpers:e,name:"".concat(s,".").concat(r),argType:n,inputMode:a})}))}),Object(h.jsx)(y.a,{onClick:()=>e.push({include:!0}),size:"sm",children:"+ Add"})]})})},gn=Mt.a(Mt.d({name:Mt.e(),description:Mt.e(),include:Mt.b(),arg:Mt.e().min(1).required("The argument cannot be blank")})),Sn=()=>{const{app:e}=Ks(),t=Object(o.useMemo)((()=>{var t,s,n;return null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.parameterSet)||void 0===n?void 0:n.appArgs)&&void 0!==t?t:[]}),[e]),s=Object(o.useMemo)((()=>{var t,s,n;return null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.parameterSet)||void 0===n?void 0:n.containerArgs)&&void 0!==t?t:[]}),[e]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Arguments"}),Object(h.jsx)(_n,{name:"parameterSet.appArgs",argType:"App Argument",argSpecs:t}),Object(h.jsx)(_n,{name:"parameterSet.containerArgs",argType:"Container Argument",argSpecs:s})]})},Nn=e=>e.reduce(((e,t)=>"".concat(e).concat(t.include?" ".concat(t.arg):"")),""),An=()=>{var e,t,s,n;const{job:o}=Ks(),r=null!==(e=null===(t=o.parameterSet)||void 0===t?void 0:t.appArgs)&&void 0!==e?e:[],a=null!==(s=null===(n=o.parameterSet)||void 0===n?void 0:n.containerArgs)&&void 0!==s?s:[];return Object(h.jsxs)("div",{children:[Object(h.jsx)(zs,{field:"App: ".concat(Nn(r))},"app-args-summary"),Object(h.jsx)(zs,{field:"Container: ".concat(Nn(a))},"container-args-summary")]})},Tn=Mt.d().shape({parameterSet:Mt.d({appArgs:gn,containerArgs:gn,scheduleOptions:gn})});var Cn={id:"args",name:"Arguments",render:Object(h.jsx)(Sn,{}),summary:Object(h.jsx)(An,{}),validationSchema:Tn,generateInitialValues:e=>{var t,s,n;let{job:o}=e;return{parameterSet:{appArgs:null===(t=o.parameterSet)||void 0===t?void 0:t.appArgs,containerArgs:null===(s=o.parameterSet)||void 0===s?void 0:s.containerArgs,schedulerOptions:null===(n=o.parameterSet)||void 0===n?void 0:n.schedulerOptions}}}},kn=s(170),Ln=s.n(kn);const Pn=e=>{var t,s;const n=null!==(t=null===(s=e.parameterSet)||void 0===s?void 0:s.schedulerOptions)&&void 0!==t?t:[];var o,r,a,i;n.find((e=>"chargeProject"===e.name))||(null===(o=e.parameterSet)||void 0===o||null===(r=o.schedulerOptions)||void 0===r||r.push({name:"chargeProject",description:"Charge project",include:!0,arg:"-A BCS23003"}));n.find((e=>"profile"===e.name))||(null===(a=e.parameterSet)||void 0===a||null===(i=a.schedulerOptions)||void 0===i||i.push({name:"profile",description:"Tapis profile",include:!0,arg:"--tapis-profile tacc"}));const c=n.find((e=>{var t;return null===(t=e.arg)||void 0===t?void 0:t.includes("--tapis-profile")}));if(c){var l;const e=null===(l=c.arg)||void 0===l?void 0:l.split(" ");if(e&&e.length>=2)return e[1]}},Mn=()=>{const{schedulerProfiles:e}=Ks(),{values:t,setValues:s}=Object(bt.j)(),n=Object(o.useCallback)((e=>{var n,o;const r=null!==(n=null===(o=t.parameterSet)||void 0===o?void 0:o.schedulerOptions)&&void 0!==n?n:[];s({parameterSet:{schedulerOptions:[e,...r.filter((e=>{var t;return!(null!==(t=e.arg)&&void 0!==t&&t.includes("--tapis-profile"))}))]}})}),[t,s]),r=Object(o.useMemo)((()=>Pn(t)),[t]);return Object(h.jsxs)("div",{className:mn.a.array,children:[Object(h.jsx)("h3",{children:"Scheduler Profiles"}),e.map((e=>{let{name:t,description:s,hiddenOptions:o,owner:a,tenant:i}=e;return Object(h.jsxs)($t,{className:mn.a["array-group"],title:"".concat(t," ").concat(t===r?"(selected)":""),children:[Object(h.jsxs)("div",{className:Ln.a["scheduler-option"],children:[Object(h.jsx)("div",{children:s}),Object(h.jsx)(Me,{data:{hiddenOptions:o,owner:a,tenant:i},className:Ln.a["scheduler-option-list"]})]}),Object(h.jsx)(y.a,{size:"sm",onClick:()=>n({name:"".concat(t," Scheduler Profile"),description:s,include:!0,arg:"--tapis-profile ".concat(t)}),disabled:t===r,children:"Use This Profile"})]},"scheduler-profiles-".concat(t))}))]})},In=()=>{const{app:e}=Ks(),[t]=Object(bt.i)("parameterSet.schedulerOptions"),s=Object(o.useMemo)((()=>{var e;return null!==(e=t.value)&&void 0!==e?e:[]}),[t]),n=Object(o.useMemo)((()=>{var t,s,n;return null!==(t=null===(s=e.jobAttributes)||void 0===s||null===(n=s.parameterSet)||void 0===n?void 0:n.schedulerOptions)&&void 0!==t?t:[]}),[e]);return Object(h.jsx)(bt.c,{name:"parameterSet.schedulerOptions",render:e=>Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:mn.a.array,children:[Object(h.jsx)("h3",{children:"Scheduler Arguments"}),Object(h.jsx)("div",{className:mn.a["array-group"],children:s.map(((t,s)=>{const o=t.name?Vs(t.name,n):void 0;return Object(h.jsx)(yn,{index:s,arrayHelpers:e,name:"parameterSet.schedulerOptions.".concat(s),argType:"scheduler option",inputMode:o})}))}),Object(h.jsx)(y.a,{onClick:()=>e.push({name:"",description:"",include:!0,arg:""}),size:"sm",children:"+ Add"})]}),Object(h.jsx)(Mn,{})]})})},wn=()=>Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Scheduler Options"}),Object(h.jsx)(In,{})]}),En=()=>{var e,t,s;const{job:n}=Ks(),o=null!==(e=null===(t=n.parameterSet)||void 0===t?void 0:t.schedulerOptions)&&void 0!==e?e:[];return Object(h.jsxs)("div",{children:[Object(h.jsx)(zs,{field:"Scheduler Profile: ".concat(null!==(s=Pn(n))&&void 0!==s?s:"none selected")},"scheduler-profile-summary"),Object(h.jsx)(zs,{field:"Scheduler Args: ".concat(Nn(o))},"scheduler-args-summary")]})},Dn=Mt.d().shape({parameterSet:Mt.d({scheduleOptions:gn})});const Fn=e=>!!e.name&&!!e.appId&&!!e.appVersion,qn=()=>{var e,t,s,n;const{job:r,app:a,systems:i}=Ks(),c=ln(r,a,i)===cn.Complete&&Fn(r)&&Js(a,null!==(e=r.fileInputs)&&void 0!==e?e:[])&&Us(a,null!==(t=r.fileInputArrays)&&void 0!==t?t:[]),{isLoading:l,error:d,isSuccess:u,submit:m,data:j}=Fs(a.id,a.version),b=Object(o.useCallback)((()=>{m(r)}),[m,r]),p=c?u?"Successfully submitted job ".concat(null!==(s=null===j||void 0===j||null===(n=j.result)||void 0===n?void 0:n.uuid)&&void 0!==s?s:""):"The job is ready for submission":void 0;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Job Submission"}),Object(h.jsxs)("div",{className:mn.a.array,children:[Object(h.jsx)(zs,{field:p,error:"All required fields must be completed before the job can be submitted"}),Object(h.jsx)(Pt,{isLoading:l,error:d,success:u?" ":"",reverse:!0,children:Object(h.jsx)(y.a,{color:"primary",disabled:l||!c||u,onClick:b,children:"Submit Job"})})]}),Object(h.jsx)("div",{children:"This is a preview of the json job submission data. You may copy it for future reference."}),Object(h.jsx)(ns,{json:r})]})},Rn=()=>{var e,t;const{app:s,job:n,systems:o}=Ks(),r=ln(n,s,o)&&Fn(n)&&Js(s,null!==(e=n.fileInputs)&&void 0!==e?e:[])&&Us(s,null!==(t=n.fileInputArrays)&&void 0!==t?t:[]);return Object(h.jsx)("div",{children:Object(h.jsx)(zs,{field:r?"The job is ready for submission":void 0,error:"All required fields must be completed before the job can be submitted"},"job-submit-summary")})};var Jn=[nn,fn,Cn,{id:"schedulerOptions",name:"Scheduler Options",render:Object(h.jsx)(wn,{}),summary:Object(h.jsx)(En,{}),validationSchema:Dn,generateInitialValues:e=>{var t;let{job:s}=e;return{parameterSet:{schedulerOptions:null===(t=s.parameterSet)||void 0===t?void 0:t.schedulerOptions}}}},{id:"jobSubmit",name:"Job Submission",render:Object(h.jsx)(qn,{}),summary:Object(h.jsx)(Rn,{}),validationSchema:{},generateInitialValues:()=>({})}],Bn=s(1099);var Qn=e=>{let{id:t,version:s,notes:n}=e;const{gitUrl:o,gitRef:r,rawReadmeUrl:a}=n,{data:i,isLoading:c,error:l}=Object(u.useQuery)(["readme",o,r,a],(async()=>(await fetch(a)).text()));return c?Object(h.jsx)("div",{children:"Loading..."}):i?Object(h.jsxs)("div",{style:{maxWidth:"800px"},children:[Object(h.jsx)(Bn.a,{children:i}),";"]}):Object(h.jsx)("div",{children:"No readme found"})};const Un=Mt.d().shape({});function Vn(e){var t,s;let{steps:n,memo:r,formSubmit:a}=e;const{job:i,app:c,systems:l}=Ks(),{isLoading:d,error:u,isSuccess:m,submit:j}=Fs(c.id,c.version),b=l.find((e=>e.systemType===Nt.Systems.SystemTypeEnum.Linux));var p,v,x,O;(i.execSystemId=null===b||void 0===b?void 0:b.id,0===(null===(t=i.parameterSet)||void 0===t||null===(s=t.schedulerOptions)||void 0===s?void 0:s.length))&&(null===(p=i.parameterSet)||void 0===p||null===(v=p.schedulerOptions)||void 0===v||v.push({arg:"-A BCS23003",name:"chargeProject",include:!0,description:"Project to charge"}),null===(x=i.parameterSet)||void 0===x||null===(O=x.schedulerOptions)||void 0===O||O.push({arg:"--tapis-profile tacc",name:"profile",include:!0,description:"The tapis-profile value set in execution system."}));const f=Object(o.useCallback)((e=>{j(i)}),[j,i]);return b?Object(h.jsxs)("div",{children:[Object(h.jsxs)(zt,{type:"sub-header",children:[c.id," v",c.version]}),Object(h.jsx)(zt,{type:"sub-header",children:Object(h.jsx)(Pt,{isLoading:d,error:u,success:m?" ":"",children:Object(h.jsx)(bt.e,{initialValues:{},validationSchema:Un,onSubmit:e=>{f(e)},children:e=>{let{errors:t,touched:s}=e;return Object(h.jsx)(bt.d,{children:Object(h.jsx)(y.a,{color:"primary",type:"submit",children:"Run"})})}})})}),Object(h.jsx)(Qn,{id:c.id,version:c.version,notes:c.notes})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:" No Linux system found. Please add a Linux System"})})}const Wn=e=>{let{jobSteps:t}=e;const{add:s,job:n,app:r,systems:a}=Ks(),i=Object(o.useCallback)((e=>{e.jobType===Nt.Apps.JobTypeEnum.Fork&&(e.execSystemLogicalQueue=void 0),e.isMpi?e.cmdPrefix=void 0:e.mpiCmd=void 0,e.parameterSet&&(e.parameterSet={...n.parameterSet,...e.parameterSet}),s(e)}),[s,n]),c=Object(o.useMemo)((()=>t.map((e=>{const{generateInitialValues:t,validateThunk:s,...o}=e;return{initialValues:t({job:n,app:r,systems:a}),validate:s?s({job:n,app:r,systems:a}):void 0,...o}}))),[r,n,a,t]);return Object(h.jsx)(Vn,{steps:c,memo:"".concat(r.id).concat(r.version),formSubmit:i})};var Hn=e=>{let{appId:t,appVersion:s}=e;const{data:n,isLoading:r,error:a}=As({appId:t,appVersion:s},{refetchOnWindowFocus:!1}),{data:i,isLoading:c,error:l}=qt({select:"allAttributes"},{refetchOnWindowFocus:!1}),{data:d,isLoading:u,error:m}=Jt({refetchOnWindowFocus:!1}),j=null===n||void 0===n?void 0:n.result,b=Object(o.useMemo)((()=>{var e;return null!==(e=null===i||void 0===i?void 0:i.result)&&void 0!==e?e:[]}),[i]),p=Object(o.useMemo)((()=>{var e;return null!==(e=null===d||void 0===d?void 0:d.result)&&void 0!==e?e:[]}),[d]),v=Object(o.useMemo)((()=>Hs({app:j,systems:b})),[j,b]);return Object(h.jsx)(Ct,{isLoading:r||c||u,error:a||l||m,children:j&&Object(h.jsx)($s,{value:{app:j,systems:b,defaultValues:v,schedulerProfiles:p},children:Object(h.jsx)(Wn,{jobSteps:Jn})})})};const zn=e=>{let{appId:t,appVersion:s}=e;const n=Object(h.jsx)("div",{style:{flex:1},children:Object(h.jsx)(Hn,{appId:t,appVersion:s})});return Object(h.jsx)(Vt,{right:n})};var Yn=r.a.memo(zn);var Gn=()=>{const{path:e}=Object(st.i)();return Object(h.jsxs)(st.d,{children:[Object(h.jsx)(st.b,{path:"".concat(e),exact:!0,children:Object(h.jsx)(_e,{type:"info",children:"Select an cookbook template from the list."})}),Object(h.jsx)(st.b,{path:"".concat(e,"/:appId/:appVersion"),render:e=>{let{match:{params:{appVersion:t,appId:s}}}=e;return Object(h.jsx)(Yn,{appId:s,appVersion:t})}})]})};var Xn=()=>{const e=Object(h.jsx)(zt,{children:Object(h.jsx)("div",{children:"Apps"})}),t=Object(h.jsx)(Yt,{children:Object(h.jsx)(ks,{})}),s=Object(h.jsx)(Gt,{children:Object(h.jsx)(Gn,{})});return Object(h.jsx)(Vt,{top:e,left:t,right:s})};var Zn=()=>{const{login:e,isLoading:t,error:s}=fs(),{accessToken:n}=p(),o=Mt.d({username:Mt.e().required(),password:Mt.e().required()});return Object(h.jsx)(bt.e,{initialValues:{username:"",password:""},validationSchema:o,onSubmit:t=>{let{username:s,password:n}=t;return e(s,n)},children:Object(h.jsxs)(bt.d,{children:[Object(h.jsx)(vt,{name:"username",label:"Username",required:!0,description:"Your TAPIS username"}),Object(h.jsx)(vt,{name:"password",label:"Password",required:!0,description:"Your TAPIS password",type:"password"}),Object(h.jsx)(Pt,{isLoading:t,error:s,success:n&&"Successfully logged in",children:Object(h.jsx)(y.a,{type:"submit",className:"btn btn-primary",disabled:t||null!=n,children:"Log In"})})]})})};var $n=()=>{const{accessToken:e}=p();let t=Object(st.h)(),{from:s}=t.state||{from:{pathname:"/"}};return null!==e&&void 0!==e&&e.access_token?Object(h.jsx)(st.a,{to:s}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(X,{children:"Login"}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)(Zn,{})})]})},Kn=s(1095),eo=s(1096),to=s(1097),so=s(81),no=s.n(so),oo=(s(1010),s(172)),ro=s.n(oo),ao=s(1094);const io=()=>{const{isLoading:e,error:t,isSuccess:s,submit:n,data:r}=Cs(),[a,i]=Object(o.useState)(null),[c,l]=Object(o.useState)(null);Object(o.useEffect)((()=>{(async()=>{if(a){const e=await a.text(),t=JSON.parse(e);l(t)}})()}),[a]);const d=Object(o.useRef)(null);return Object(h.jsxs)("div",{className:ro.a.container,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:" Create new application "}),Object(h.jsx)("h3",{children:" Upload a JSON file with the application specification "}),Object(h.jsxs)(ao.a,{onSubmit:e=>{e.preventDefault(),null!==c&&n(c)},children:[Object(h.jsx)(ct.a,{children:Object(h.jsx)(Ie.a,{type:"file",name:"file",id:"file",ref:d,onChange:e=>(e=>{console.log("file changed"),e.target.files&&i(e.target.files[0])})(e),onClick:e=>(e=>{e.target.value=""})(e)})}),Object(h.jsx)(Pt,{isLoading:e,error:t,success:s?"Application created":"",children:Object(h.jsx)(y.a,{className:ro.a.submit,color:"primary",disabled:e||s||!a,children:"Submit"})})]})]}),Object(h.jsx)("div",{children:null!==c&&void 0!==c?Object(h.jsx)(ns,{json:c}):Object(h.jsx)("p",{children:"Load the file to see the app specification "})})]})};var co=()=>{const{accessToken:e,claims:t}=p();return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:no.a.cards,children:e?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(io,{})}):Object(h.jsxs)(te.a,{children:[Object(h.jsx)(se.a,{children:Object(h.jsxs)("div",{className:no.a["card-header"],children:[Object(h.jsx)("div",{children:Object(h.jsx)(ae,{name:"user",className:"dashboard__card-icon"})}),Object(h.jsx)("div",{children:"You are not logged in"})]})}),Object(h.jsx)(oe.a,{children:Object(h.jsx)(Kn.a,{children:"Please log in to use TAPIS"})}),Object(h.jsxs)(to.a,{className:no.a["card-footer"],children:[Object(h.jsx)(c.b,{to:"/login",children:"Proceed to login"}),Object(h.jsx)(ae,{name:"push-right"})]})]})})})};var lo=()=>{var e;const{data:t,isLoading:s,error:n}=Es(),{url:o}=Object(st.i)(),r=null!==(e=null===t||void 0===t?void 0:t.result)&&void 0!==e?e:[];return Object(h.jsx)(Ct,{isLoading:s,error:n,children:Object(h.jsx)(ps,{children:r.length?r.map((e=>Object(h.jsx)(bs,{to:"".concat(o,"/").concat(e.uuid),icon:"jobs",children:"".concat(e.name," - (").concat(e.status,")")},e.uuid))):Object(h.jsx)("i",{children:"No jobs found"})})})};var uo=e=>{let{jobUuid:t}=e;const{data:s,isLoading:n,error:o}=Ds(t),r=null===s||void 0===s?void 0:s.result;return Object(h.jsxs)(Ct,{isLoading:n,error:o,children:[Object(h.jsx)("h3",{children:null===r||void 0===r?void 0:r.name}),Object(h.jsx)("h5",{children:null===r||void 0===r?void 0:r.uuid}),r&&Object(h.jsx)(Me,{data:r})]})};const{useBuilderContext:mo,Provider:jo}=Ys();Mt.d({name:Mt.e().required().min(1).max(64),description:Mt.e()});s(36);Mt.d({execSystemId:Mt.e(),execSystemLogicalQueue:Mt.e(),execSystemExecDir:Mt.e(),execSystemInputDir:Mt.e(),execSystemOutputDir:Mt.e(),jobType:Mt.e(),nodeCount:Mt.c(),coresPerNode:Mt.c(),memoryMB:Mt.c(),maxMinutes:Mt.c(),isMpi:Mt.b(),mpiCmd:Mt.e(),cmdPrefix:Mt.e()});const bo=Mt.a(Mt.d({name:Mt.e(),description:Mt.e(),include:Mt.b(),arg:Mt.e().min(1).required("The argument cannot be blank")}));Mt.d().shape({parameterSet:Mt.d({appArgs:bo,containerArgs:bo,scheduleOptions:bo})});Mt.d().shape({parameterSet:Mt.d({envVariables:Mt.a(Mt.d({key:Mt.e().min(1).required("A key name is required for this environment variable"),value:Mt.e().required("A value is required for this environment variable")}))})});s(173);Mt.d().shape({parameterSet:Mt.d({scheduleOptions:bo})});Mt.d().shape({archiveOnAppError:Mt.b(),archiveSystemId:Mt.e(),archiveSystemDir:Mt.e(),parameterSet:Mt.d({archiveFilter:Mt.d({includes:Mt.a(Mt.e().min(1).required("A pattern must be specified for this include")),excludes:Mt.a(Mt.e().min(1).required("A pattern must be specified for this exclude")),includeLaunchFiles:Mt.b()})})});var po=e=>{let{jobUuid:t}=e;const s=Object(h.jsx)(zt,{type:"sub-header",children:"Job Details"}),n=Object(h.jsx)("div",{style:{flex:1},children:Object(h.jsx)(uo,{jobUuid:t})});return Object(h.jsx)(Vt,{top:s,right:n})};var ho=()=>{const{path:e}=Object(st.i)();return Object(h.jsxs)(st.d,{children:[Object(h.jsx)(st.b,{path:"".concat(e),exact:!0,children:Object(h.jsx)(_e,{type:"info",children:"Select a job from the list."})}),Object(h.jsx)(st.b,{path:"".concat(e,"/:jobUuid"),render:e=>{let{match:{params:{jobUuid:t}}}=e;return Object(h.jsx)(po,{jobUuid:t})}})]})};var vo=()=>{const e=Object(h.jsx)(zt,{children:Object(h.jsx)("div",{children:"Jobs"})}),t=Object(h.jsx)(Yt,{children:Object(h.jsx)(lo,{})}),s=Object(h.jsx)(Gt,{children:Object(h.jsx)(ho,{})});return Object(h.jsx)(Vt,{top:e,left:t,right:s})};var xo=()=>{var e;const{url:t}=Object(st.i)(),{data:s,isLoading:n,error:o}=qt(),r=null!==(e=null===s||void 0===s?void 0:s.result)&&void 0!==e?e:[];return Object(h.jsx)(Ct,{isLoading:n,error:o,children:Object(h.jsx)(ps,{children:r.length?r.map((e=>Object(h.jsx)(bs,{to:"".concat(t,"/").concat(e.id),icon:"data-files",children:"".concat(e.id," (").concat(e.host,")")},e.id))):Object(h.jsx)("i",{children:"No systems found"})})})};var Oo=e=>{let{systemId:t}=e;const s=Object(h.jsx)(zt,{type:"sub-header",children:"System Details"}),n=Object(h.jsx)("div",{style:{flex:1},children:Object(h.jsx)(Bt,{systemId:t})});return Object(h.jsx)(Vt,{top:s,right:n})};var fo=()=>{const{path:e}=Object(st.i)();return Object(h.jsxs)(st.d,{children:[Object(h.jsx)(st.b,{path:"".concat(e),exact:!0,children:Object(h.jsx)(_e,{type:"info",children:"Select a system from the list."})}),Object(h.jsx)(st.b,{path:"".concat(e,"/:systemId"),render:e=>{let{match:{params:{systemId:t}}}=e;return Object(h.jsx)(Oo,{systemId:t})}})]})};var yo=()=>{const e=Object(h.jsx)(zt,{children:Object(h.jsx)("div",{children:"System List"})}),t=Object(h.jsx)(Yt,{children:Object(h.jsx)(xo,{})}),s=Object(h.jsx)(Gt,{children:Object(h.jsx)(fo,{})});return Object(h.jsx)(Vt,{top:e,left:t,right:s})},_o=s(82),go=s.n(_o);s(1011);var So=[{id:"ls6",name:"Lonestar 6",description:"Lonestar 6 is a Dell EMC PowerEdge cluster with Intel Xeon Platinum 8280M processors and NVIDIA A100 GPUs.",created:!1,spec:{id:"ls6-gpu-a100-dev-v0.0.5",description:"System for running jobs on the LS6 cluster",systemType:"LINUX",host:"ls6.tacc.utexas.edu",defaultAuthnMethod:"PASSWORD",effectiveUserId:"${apiUserId}",port:22,rootDir:"/",canExec:!0,jobRuntimes:[{runtimeType:"SINGULARITY"}],jobWorkingDir:"HOST_EVAL($WORK2)",canRunBatch:!0,batchScheduler:"SLURM",batchSchedulerProfile:"tacc",batchDefaultLogicalQueue:"development",batchLogicalQueues:[{name:"gpu-a100",hpcQueueName:"gpu-a100",maxJobs:-1,maxJobsPerUser:40,minNodeCount:1,maxNodeCount:16,minCoresPerNode:1,maxCoresPerNode:128,minMemoryMB:1,maxMemoryMB:256e3,minMinutes:1,maxMinutes:2880},{name:"development",hpcQueueName:"development",maxJobs:50,maxJobsPerUser:10,minNodeCount:1,maxNodeCount:16,minCoresPerNode:1,maxCoresPerNode:68,minMemoryMB:1,maxMemoryMB:16384,minMinutes:1,maxMinutes:120}]}},{id:"frontera",name:"Frontera",description:"The primary computing system was provided by Dell EMC and powered by Intel processors, interconnected by a Mellanox Infiniband HDR and HDR-100 interconnect. The system has 8,008 available compute nodes",spec:{id:"frontera",description:"System for running jobs on the Frontera cluster",systemType:"LINUX",host:"frontera.tacc.utexas.edu",defaultAuthnMethod:"PASSWORD",effectiveUserId:"${apiUserId}",port:22,rootDir:"/",canExec:!0,jobRuntimes:[{runtimeType:"SINGULARITY"}],jobWorkingDir:"HOST_EVAL($WORK2)",canRunBatch:!0,batchScheduler:"SLURM",batchSchedulerProfile:"tacc",batchDefaultLogicalQueue:"development",batchLogicalQueues:[{name:"gpu-a100",hpcQueueName:"gpu-a100",maxJobs:-1,maxJobsPerUser:40,minNodeCount:1,maxNodeCount:16,minCoresPerNode:1,maxCoresPerNode:128,minMemoryMB:1,maxMemoryMB:256e3,minMinutes:1,maxMinutes:2880},{name:"development",hpcQueueName:"development",maxJobs:50,maxJobsPerUser:10,minNodeCount:1,maxNodeCount:16,minCoresPerNode:1,maxCoresPerNode:68,minMemoryMB:1,maxMemoryMB:16384,minMinutes:1,maxMinutes:120}]},created:!1}];const No=e=>{let{icon:t,link:s,name:n,text:o,created:r}=e;return Object(h.jsxs)(te.a,{className:go.a.card,children:[Object(h.jsx)(se.a,{children:Object(h.jsxs)("div",{className:go.a["card-header"],children:[Object(h.jsx)("div",{children:Object(h.jsx)(ae,{name:t,className:"dashboard__card-icon"})}),Object(h.jsx)("div",{children:n})]})}),Object(h.jsxs)(oe.a,{children:[Object(h.jsx)(Kn.a,{tag:"h5",children:Object(h.jsx)("div",{children:o})}),Object(h.jsx)(eo.a,{})]}),Object(h.jsx)(to.a,{className:go.a["card-footer"],children:r?Object(h.jsx)("span",{children:"Installed"}):Object(h.jsxs)(c.b,{to:s,children:["Create ",n]})})]})};var Ao=()=>{const{accessToken:e,claims:t}=p(),{isLoading:s,error:n,data:o}=qt();return s?Object(h.jsx)(S,{}):Object(h.jsxs)("div",{children:[Object(h.jsx)(X,{className:"dashboard__section-header",children:"Install a system using cookbooks"}),Object(h.jsx)("div",{className:go.a.cards,children:e?Object(h.jsx)(h.Fragment,{children:So.filter((e=>"LINUX"===e.spec.systemType)).sort(((e,t)=>e.created===t.created?0:e.created?1:-1)).map((e=>{var t;return e.created=!(null===o||void 0===o||null===(t=o.result)||void 0===t||!t.find((t=>t.host===e.spec.host))),Object(h.jsx)(No,{icon:"data-files",name:e.name,text:e.description,link:"/cookbooks/systems/".concat(e.id),created:e.created},e.id)}))}):Object(h.jsxs)(te.a,{children:[Object(h.jsx)(se.a,{children:Object(h.jsxs)("div",{className:go.a["card-header"],children:[Object(h.jsx)("div",{children:Object(h.jsx)(ae,{name:"user",className:"dashboard__card-icon"})}),Object(h.jsx)("div",{children:"You are not logged in"})]})}),Object(h.jsx)(oe.a,{children:Object(h.jsx)(Kn.a,{children:"Please log in to use TAPIS"})}),Object(h.jsxs)(to.a,{className:go.a["card-footer"],children:[Object(h.jsx)(c.b,{to:"/login",children:"Proceed to login"}),Object(h.jsx)(ae,{name:"push-right"})]})]})})]})};var To=(e,t,s)=>{const n=At(Nt.Systems,Nt.Systems.SystemsApi,t,s);return Tt((()=>n.createSystem({reqPostSystem:e})))};var Co=()=>{const{basePath:e,accessToken:t}=p(),s=(null===t||void 0===t?void 0:t.access_token)||"",{mutate:n,isLoading:r,isError:a,isSuccess:i,data:c,error:l,reset:d}=Object(u.useMutation)([Dt,e,s],(t=>To(t,e,s)));return Object(o.useEffect)((()=>d()),[d]),{isLoading:r,isError:a,isSuccess:i,data:c,error:l,reset:d,submit:e=>n(e)}};var ko={create:"credentials/create"};var Lo=(e,t,s,n,o)=>{console.log(e);const r=At(Nt.Systems,Nt.Systems.CredentialsApi,n,o);return Tt((()=>r.createUserCredential({systemId:t,userName:e,reqUpdateCredential:s})))};var Po=()=>{const{basePath:e,accessToken:t}=p(),s=(null===t||void 0===t?void 0:t.access_token)||"",{mutate:n,isLoading:r,isError:a,isSuccess:i,data:c,error:l,reset:d}=Object(u.useMutation)([ko,e,s],(t=>Lo(t.username,t.systemId,t.request,e,s)));return Object(o.useEffect)((()=>d()),[d]),{isLoading:r,isError:a,isSuccess:i,data:c,error:l,reset:d,submit:e=>n(e)}};var Mo=e=>{let{systemId:t}=e;const{claims:s}=p(),n=s["tapis/username"],{isLoading:r,error:a,isSuccess:i,submit:c,data:l}=Co(),{isLoading:d,isSuccess:u,error:m,submit:j,data:b}=Po(),{data:v,isLoading:x}=qt(),O=Mt.d().shape({password:Mt.e().required("Password is required.")}),f=So.find((e=>e.id===t));Object(o.useEffect)((()=>{var e;if(!f)return;const t=null===v||void 0===v||null===(e=v.result)||void 0===e?void 0:e.find((e=>e.id===f.spec.id));console.log(t),t||c(f.spec)}),[v]);const _=Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S,{placement:"inline"})}),g=Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{children:[" Create system: ",null===f||void 0===f?void 0:f.id," "]}),Object(h.jsxs)("p",{children:[" ",null===f||void 0===f?void 0:f.description," "]}),Object(h.jsx)(bt.e,{initialValues:{password:""},validationSchema:O,onSubmit:async e=>{f&&await j({username:n,systemId:f.spec.id,request:{password:e.password}})},children:Object(h.jsxs)(bt.d,{id:"rename-form",children:[Object(h.jsx)(vt,{name:"password",type:"password",label:"Password",required:!0,description:"The password for the user."}),Object(h.jsx)(Pt,{isLoading:r||d,error:a||m,success:u?"System created":void 0,children:Object(h.jsx)(y.a,{type:"submit",className:"btn btn-primary",disabled:!(!d&&!u),children:"Create"})})]})})]});return r?_:(a&&(null===a||void 0===a||a.message),g)};var Io={id:"llama-index-environment",version:"sha-21437c6",description:"Run an interactive Jupyter Lab session on an HPC compute node. For the LLama Index Environment",owner:"${apiUserId}",enabled:!0,runtime:Nt.Apps.RuntimeEnum.Singularity,runtimeOptions:[Nt.Apps.RuntimeOptionEnum.SingularityRun],containerImage:"docker://ghcr.io/mosoriob/llmrepository-docker:sha-21437c6",jobType:Nt.Apps.JobTypeEnum.Batch,maxJobs:-1,maxJobsPerUser:-1,strictFileInputs:!0,jobAttributes:{execSystemExecDir:"${JobWorkingDir}/jobs/${JobUUID}",execSystemInputDir:"${JobWorkingDir}/jobs/${JobUUID}/input",execSystemOutputDir:"${JobWorkingDir}/jobs/${JobUUID}/output",maxMinutes:100,parameterSet:{containerArgs:[{name:"mount",description:"Mount a directory from the host into the container",inputMode:Nt.Apps.ArgInputModeEnum.Fixed,arg:"--bind /share"}],envVariables:[{key:"email"}]}},tags:["portalName: ALL"],notes:{label:"Jupyter Lab HPC (Frontera)",helpUrl:"https://jupyterlab.readthedocs.io/en/stable/",hideNodeCountAndCoresPerNode:!1,isInteractive:!0,gitUrl:"https://github.com/In-For-Disaster-Analytics/cookbooks-ui",gitRef:"main",rawReadmeUrl:"https://raw.githubusercontent.com/In-For-Disaster-Analytics/sites-and-stories-nlp/jupyterenv/README.md",icon:"jupyter",category:"Data Processing"}};const wo=()=>{const{isLoading:e,error:t,isSuccess:s,submit:n,data:r}=Cs(),a=Object(o.useCallback)((()=>{Io.id="".concat(Io.id,"-").concat(Date.now()),n(Io)}),[n]);return Object(o.useEffect)((()=>{s&&window.location.reload()}),[s]),Object(h.jsxs)("div",{children:[t&&Object(h.jsxs)("div",{children:["Error: ",t.message]}),Object(h.jsx)(y.a,{color:"primary",disabled:e||s,onClick:a,children:"Create default template"})]})},Eo={id:"img-classify",version:"v1",description:"Image classifier run using Singularity in batch mode",jobType:Nt.Apps.JobTypeEnum.Batch,runtime:Nt.Apps.RuntimeEnum.Singularity,runtimeOptions:[Nt.Apps.RuntimeOptionEnum.SingularityRun],containerImage:"docker://tapis/img-classify-sing:0.1",jobAttributes:{parameterSet:{appArgs:[{arg:"--image_file",name:"arg1"}],archiveFilter:{includeLaunchFiles:!1}},nodeCount:1,coresPerNode:1,memoryMB:1,maxMinutes:10}};var Do=[{name:"LLama Index Environment",description:"Run an interactive Jupyter Lab session on an HPC compute node. For the LLama Index Environment",spec:Io},{name:"Image classification",description:"Image classification using a pre-trained model",spec:Eo}];var Fo=()=>Object(h.jsx)(ps,{children:Do.length?Do.map((e=>Object(h.jsx)(bs,{to:"/cookbooks/apps/".concat(e.spec.id,"/").concat(e.spec.version),icon:"applications",children:"".concat(e.name," v").concat(e.spec.version)},e.spec.id))):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("i",{children:"No templates found"}),Object(h.jsx)(wo,{})]})});const qo=e=>{var t;let{appId:s,appVersion:n}=e;const{isLoading:o,error:r,isSuccess:a,submit:i,data:l}=Cs(),{isLoading:d,error:m,data:j}=Ns(),b=Do.find((e=>e.spec.id===s&&e.spec.version===n)),p=!(null===j||void 0===j||null===(t=j.result)||void 0===t||!t.find((e=>e.id===(null===b||void 0===b?void 0:b.spec.id)&&e.version===(null===b||void 0===b?void 0:b.spec.version)))),v=Object(h.jsxs)("div",{children:["Successfully created ",null===b||void 0===b?void 0:b.name," ",null===b||void 0===b?void 0:b.spec.version]}),x=Object(u.useQueryClient)(),O=Object(h.jsx)(Pt,{isLoading:o,error:r,success:a?"App created":void 0,children:Object(h.jsx)(y.a,{color:"primary",onClick:()=>{b&&(i(null===b||void 0===b?void 0:b.spec),x.invalidateQueries(Dt.list))},disabled:void 0===b||o||d||p,successText:v,children:"Add"})}),f=Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)(zt,{type:"sub-header",children:null===b||void 0===b?void 0:b.name}),Object(h.jsx)(zt,{type:"sub-header",children:o||d?Object(h.jsx)(S,{placement:"inplace"}):p?Object(h.jsx)(c.b,{to:"/apps/".concat(s,"/").concat(n),children:"View"}):O}),b&&b.spec&&b.spec.notes?Object(h.jsx)(Qn,{id:null===b||void 0===b?void 0:b.spec.id,version:null===b||void 0===b?void 0:b.spec.version,notes:null===b||void 0===b?void 0:b.spec.notes}):Object(h.jsx)("span",{children:" No README "})]});return Object(h.jsx)(Vt,{right:f})};var Ro=r.a.memo(qo);var Jo=()=>{const{path:e}=Object(st.i)();return Object(h.jsxs)(st.d,{children:[Object(h.jsx)(st.b,{path:"".concat(e),exact:!0,children:Object(h.jsx)(_e,{type:"info",children:"Select an cookbook template from the list."})}),Object(h.jsx)(st.b,{path:"".concat(e,"/:appId/:appVersion"),render:e=>{let{match:{params:{appVersion:t,appId:s}}}=e;return Object(h.jsx)(Ro,{appId:s,appVersion:t})}})]})};var Bo=()=>{const e=Object(h.jsx)(zt,{children:Object(h.jsx)("div",{children:"Cookbooks Apps"})}),t=Object(h.jsx)(Yt,{children:Object(h.jsx)(Fo,{})}),s=Object(h.jsx)(Gt,{children:Object(h.jsx)(Jo,{})});return Object(h.jsx)(Vt,{top:e,left:t,right:s})};var Qo=()=>{const{logout:e}=fs();return Object(h.jsxs)(st.d,{children:[Object(h.jsx)(st.b,{exact:!0,path:"/",children:Object(h.jsx)(co,{})}),Object(h.jsx)(st.b,{path:"/login",children:Object(h.jsx)($n,{})}),Object(h.jsx)(st.b,{path:"/logout",render:()=>(e(),Object(h.jsx)(st.a,{to:"/login"}))}),Object(h.jsx)(nt,{path:"/systems",children:Object(h.jsx)(yo,{})}),Object(h.jsx)(nt,{path:"/apps",children:Object(h.jsx)(Xn,{})}),Object(h.jsx)(nt,{path:"/jobs",children:Object(h.jsx)(vo,{})}),Object(h.jsx)(st.b,{path:"/cookbooks/systems/:systemId",render:e=>{let{match:{params:{systemId:t}}}=e;return Object(h.jsx)(Mo,{systemId:t})}}),Object(h.jsx)(st.b,{path:"/cookbooks/systems",children:Object(h.jsx)(Ao,{})}),Object(h.jsx)(nt,{path:"/cookbooks/apps",children:Object(h.jsx)(Bo,{})})]})},Uo=s(1100),Vo=s(1108),Wo=s(83),Ho=s.n(Wo);const zo=e=>{let{notification:t}=e;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:Ho.a["notification-toast-icon-wrapper"],children:Object(h.jsx)(ae,{name:t.icon,className:"ERROR"===t.status?Ho.a["toast-is-error"]:""})}),Object(h.jsx)("div",{className:Ho.a["notification-toast-content"],children:Object(h.jsx)("span",{children:t.message})})]})};var Yo=()=>{const{notifications:e,markread:t}=Zo(),[s,n]=Object(o.useState)(!1),[a,i]=Object(o.useState)(null),[c,l]=r.a.useState(void 0);Object(o.useEffect)((()=>{e.length&&!a?(i({...e[0]}),l((()=>e=>Object(h.jsx)(Vo.a,{...e,direction:"right"}))),n(!0)):e.length&&a&&s&&(n(!1),t(null===a||void 0===a?void 0:a.id),i({...e[0]}),l((()=>e=>Object(h.jsx)(Vo.a,{...e,direction:"right"}))),n(!0))}),[e]);return a&&!a.read?Object(h.jsx)(Uo.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:c,open:s,autoHideDuration:3500,onClose:(e,t)=>{"clickaway"!==t&&n(!1)},TransitionProps:{onExited:()=>{i(null),t(null===a||void 0===a?void 0:a.id)}},classes:{anchorOriginBottomLeft:Ho.a["notification-toast-container"]},ContentProps:{classes:{root:Ho.a["notification-toast"],message:Ho.a["notification-toast-body"]}},message:Object(h.jsx)(zo,{notification:a.notification})},a?a.id:void 0):null};const Go={notifications:[],dispatch:()=>{}};var Xo=r.a.createContext(Go);var Zo=()=>{const{notifications:e,dispatch:t}=Object(o.useContext)(Xo);return{notifications:e,add:e=>{const s=Object(f.a)();return t({operation:"add",notification:e,id:s}),s},markread:e=>{t({operation:"markread",id:e})},remove:e=>{t({operation:"remove",id:e})},set:(e,s)=>{t({operation:"set",id:e,notification:s})}}};const $o=(e,t)=>{const{operation:s,notification:n,id:o}=t;if("add"===s){if(!n)throw new Error("notification field missing");return[{notification:n,id:o,read:!1},...e]}const r=e.findIndex((e=>e.id===o));if(-1===r)throw new Error("Could not find notification with id ".concat(o));if("markread"===s)return e[r].read=!0,[...e];if("set"===s){if(!n)throw new Error("notification field missing");return e[r].notification={...n},[...e]}return"remove"===s?(e.splice(r,1),[...e]):e};var Ko=e=>{let{children:t}=e;const[s,n]=Object(o.useReducer)($o,[]),r={notifications:s,dispatch:n};return Object(h.jsxs)(Xo.Provider,{value:r,children:[Object(h.jsx)(Yo,{}),t]})};var er=(e,t,s)=>{const n=At(Nt.Tenants,Nt.Tenants.TenantsApi,t,s);return Tt((()=>n.listTenants(e)))};var tr={list:"tenants/list"};const sr={};var nr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{accessToken:s,basePath:n}=p();return Object(u.useQuery)([tr.list,e,s],(()=>er(e,n,(null===s||void 0===s?void 0:s.access_token)||"")),{...t,enabled:!!s})},or=(s(1012),s(1105)),rr=s(1106),ar=s(1107),ir=s(1098);var cr=()=>{var e;const{claims:t}=p(),{data:s,isLoading:n,error:r}=nr(),a=null!==(e=null===s||void 0===s?void 0:s.result)&&void 0!==e?e:[],i=Object(st.g)(),[c,l]=Object(o.useState)(!1),{logout:d}=fs(),u=Object(h.jsxs)("div",{className:"cookbooks-ui__header",children:[Object(h.jsx)("div",{children:"Cookbooks UI"}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:t.sub&&Object(h.jsxs)(or.a,{size:"sm",isOpen:c,toggle:()=>l(!c),className:"dropdown-button",children:[Object(h.jsx)(rr.a,{caret:!0,children:t.sub}),Object(h.jsxs)(ar.a,{style:{maxHeight:"50vh",overflowY:"scroll"},children:[Object(h.jsx)(ir.a,{header:!0,children:"Tenants"}),Object(h.jsx)(ir.a,{divider:!0}),Object(h.jsx)(Ct,{isLoading:n,error:r,children:a.map((e=>Object(h.jsx)(ir.a,{onClick:()=>{d(),window.location.href=e.base_url+"/cookbooks-ui/"},children:e.tenant_id})))}),Object(h.jsx)(ir.a,{divider:!0}),Object(h.jsx)(ir.a,{onClick:()=>i.push("/logout"),children:"Logout"})]})]})})]}),m=Object(h.jsx)("div",{className:"workbench-content",children:Object(h.jsx)(Qo,{})});return Object(h.jsx)(Ko,{children:Object(h.jsx)("div",{style:{display:"flex",flexGrow:1,height:"100vh"},children:Object(h.jsx)(Vt,{top:u,left:Object(h.jsx)(vs,{}),right:m})})})};s(1036);var lr=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,1109)).then((t=>{let{getCLS:s,getFID:n,getFCP:o,getLCP:r,getTTFB:a}=t;s(e),n(e),o(e),r(e),a(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(v,{basePath:(()=>{console.log(window.location.href);let e=window.location.href.replace("/cookbooks-ui/","").split("#")[0];return/127\.0\.0\.1|localhost|0\.0\.0\.0/.test(e),"https://portals.tapis.io"})(),children:Object(h.jsx)(c.a,{children:Object(h.jsx)(cr,{})})})}),document.getElementById("react-root")),lr()},105:function(e,t,s){e.exports={"layout-root":"PageLayout_layout-root__3Rkiq","layout-row":"PageLayout_layout-row__3wD1q",constrain:"PageLayout_constrain__1PZXd"}},106:function(e,t,s){e.exports={header:"Collapse_header__3VEkf",controls:"Collapse_controls__2DZgR",expand:"Collapse_expand__3od3V"}},136:function(e,t,s){e.exports={container:"Expand_container__1wonh",summary:"Expand_summary__HPWe-",header:"Expand_header__8_m_l"}},138:function(e,t,s){e.exports={wrapper:"SubmitWrapper_wrapper__3k0uZ","loading-spinner":"SubmitWrapper_loading-spinner__Ggg3z",reverse:"SubmitWrapper_reverse__1cXM1"}},140:function(e,t,s){e.exports={"transfer-list":"TransferListing_transfer-list__3YT2m",selected:"TransferListing_selected__37Yx-",link:"TransferListing_link__369FN",selectable:"TransferListing_selectable__3NGqQ"}},141:function(e,t,s){e.exports={"system-list":"SystemListing_system-list__3wQrF",selected:"SystemListing_selected__TGvd3",link:"SystemListing_link__256zs"}},142:function(e,t,s){e.exports={tab:"Tabs_tab__1DOma",active:"Tabs_active__2F-0m",pane:"Tabs_pane__1ZFHo"}},162:function(e,t,s){e.exports={root:"SectionContent_root__32g9C","should-scroll":"SectionContent_should-scroll__-yFnt","should-debug-layout":"SectionContent_should-debug-layout__1pkvG"}},163:function(e,t,s){e.exports={clamped:"ReadMore_clamped__1Ahke",expanded:"ReadMore_expanded__1blSc"}},164:function(e,t,s){e.exports={nospace:"FormikCheck_nospace__15xsN"}},168:function(e,t,s){e.exports={"file-list":"FileExplorer_file-list__dssnQ","nav-list":"FileExplorer_nav-list__1Pe_E"}},169:function(e,t,s){e.exports={json:"JSONDisplay_json__2GFii",controls:"JSONDisplay_controls__1aZyn"}},170:function(e,t,s){e.exports={"scheduler-option":"SchedulerOptions_scheduler-option__3LPSB","scheduler-option-list":"SchedulerOptions_scheduler-option-list__3w7ll"}},172:function(e,t,s){e.exports={container:"AppsAdd_container__2Tp6J","step-summary":"AppsAdd_step-summary__2-pc1",name:"AppsAdd_name__2qD2G",content:"AppsAdd_content__2rbFJ",edit:"AppsAdd_edit__30wjj",step:"AppsAdd_step__2TOW7",controls:"AppsAdd_controls__2nvMW",submit:"AppsAdd_submit__9hO7R"}},173:function(e,t,s){e.exports={"scheduler-option":"SchedulerOptions_scheduler-option__2kCW-","scheduler-option-list":"SchedulerOptions_scheduler-option-list__O0jkk"}},233:function(e,t,s){e.exports={root:"Sidebar_root__XkIbE","nav-text":"Sidebar_nav-text__1LZ9l"}},235:function(e,t,s){e.exports={root:"SectionMessages_root__3CzI2"}},236:function(e,t,s){e.exports={"one-row":"SectionContent_layouts_one-row__wB4Xa","one-column":"SectionContent_layouts_one-column__1x2OH","two-column":"SectionContent_layouts_two-column__1uXbk"}},238:function(e,t,s){e.exports={container:"DropdownSelector_container__5RNlk bootstrap_form_form-control__2cIvr"}},239:function(e,t,s){e.exports={root:"Pill_root__-L1nx","should-truncate":"Pill_should-truncate__1nq1w","is-danger":"Pill_is-danger__28QMh","is-success":"Pill_is-success__1UG2R","is-warning":"Pill_is-warning__2RmVq","is-normal":"Pill_is-normal__BtywO"}},287:function(e,t,s){},288:function(e,t,s){},292:function(e,t,s){},293:function(e,t,s){},294:function(e,t,s){},36:function(e,t,s){e.exports={array:"FieldArray_array__1qMj8",item:"FieldArray_item__Hr_LG","array-group":"FieldArray_array-group__OaBwS",description:"FieldArray_description__E21Ll"}},47:function(e,t,s){e.exports={array:"FieldArray_array__27N-8",item:"FieldArray_item__2MD2S","array-group":"FieldArray_array-group__3lNaZ",description:"FieldArray_description__3rTJc"}},55:function(e,t,s){e.exports={container:"Wizard_container__360d9","step-summary":"Wizard_step-summary__24LjF",name:"Wizard_name__2fYmh",content:"Wizard_content__1-G0_",edit:"Wizard_edit__2dqA1",step:"Wizard_step__27kYA",controls:"Wizard_controls__ab-k0",submit:"Wizard_submit__5wnUW"}},72:function(e,t,s){e.exports={container:"Message_container__19WrW","is-scope-inline":"Message_is-scope-inline__2-Qov","is-scope-section":"Message_is-scope-section__1Q01-",text:"Message_text__2hFGy","type-icon":"Message_type-icon__rpWsQ","close-button":"Message_close-button__3p8ey","is-info":"Message_is-info__2azqA",icon:"Message_icon__2Lvcz","is-warn":"Message_is-warn__1TGwA","is-error":"Message_is-error__16LPM","is-success":"Message_is-success__2vkS2"}},73:function(e,t,s){e.exports={"array-entry":"DescriptionList_array-entry__2l0Hb",container:"DescriptionList_container__BqfFF","is-horz":"DescriptionList_is-horz__2WW_S",key:"DescriptionList_key__1htZ0",value:"DescriptionList_value__2F0KY","is-narrow":"DescriptionList_is-narrow__2Puex","is-wide":"DescriptionList_is-wide__3HOCu","is-vert":"DescriptionList_is-vert__2pYkO"}},80:function(e,t,s){e.exports={root:"Paginator_root__rzq-y",endcap:"Paginator_endcap__XwdVQ","page-root":"Paginator_page-root__3d8Z0",page:"Paginator_page__DZrT3",current:"Paginator_current__1Hi6K"}},81:function(e,t,s){e.exports={container:"Dashboard_container__3lF98","step-summary":"Dashboard_step-summary__1isbS",name:"Dashboard_name__3wrsW",content:"Dashboard_content__1lBa8",edit:"Dashboard_edit__21dYI",step:"Dashboard_step__2efKm",controls:"Dashboard_controls__3h-WK",submit:"Dashboard_submit__2hLnU"}},82:function(e,t,s){e.exports={cards:"Dashboard_cards__2J5lT",card:"Dashboard_card__2aPKw","card-header":"Dashboard_card-header__3qbGZ","card-footer":"Dashboard_card-footer___nhpg",header:"Dashboard_header__2TsR5"}},83:function(e,t,s){e.exports={"notification-toast-container":"NotificationToast_notification-toast-container__3v4Cz","MuiSnackbar-anchorOriginBottomLeft":"NotificationToast_MuiSnackbar-anchorOriginBottomLeft__gSrzM","notification-toast":"NotificationToast_notification-toast__3Usjp","MuiSnackbarContent-root":"NotificationToast_MuiSnackbarContent-root__3IttC","toast-is-error":"NotificationToast_toast-is-error__1BIGF","notification-toast-body":"NotificationToast_notification-toast-body__wL5Kk","MuiSnackbarContent-message":"NotificationToast_MuiSnackbarContent-message__2I5ZD","notification-toast-icon-wrapper":"NotificationToast_notification-toast-icon-wrapper__2KxSt","notification-toast-content":"NotificationToast_notification-toast-content__YS-pU"}},84:function(e,t){},87:function(e,t,s){e.exports={"form-field__label":"FieldWrapperFormik_form-field__label__3Hlnp","form-field__help":"FieldWrapperFormik_form-field__help__3YDdS","form-field__validation-error":"FieldWrapperFormik_form-field__validation-error__yMBpL",hidden:"FieldWrapperFormik_hidden__3xAo7"}},88:function(e,t,s){e.exports={box:"Breadcrumbs_box__1xsIw",fragment:"Breadcrumbs_fragment__1Iy3A",link:"Breadcrumbs_link__cJRBS"}},89:function(e,t,s){e.exports={input:"TextCopyField_input__1hyoi bootstrap_form_form-control__2cIvr","copy-button":"TextCopyField_copy-button__7rcRt c-button_c-button--secondary__3AzmY","is-copied":"TextCopyField_is-copied__2iYPL",button__icon:"TextCopyField_button__icon__BhnL- c-button_c-button__icon--before__HExum"}},90:function(e,t,s){e.exports={"file-list":"FileListing_file-list__1x_qB","file-list-select":"FileListing_file-list-select__2nc5f",link:"FileListing_link__1DJQH",selected:"FileListing_selected__3Rhl7","select-all":"FileListing_select-all__P34Vq"}},91:function(e,t,s){e.exports={body:"LayoutSections_body__34LRF",constrain:"LayoutSections_constrain__3i5fR",nav:"LayoutSections_nav__15IYU",detail:"LayoutSections_detail__3wf4G","sub-header":"LayoutSections_sub-header__152dB"}},92:function(e,t,s){e.exports={"nav-list":"Navbar_nav-list__3vNW1","nav-link":"Navbar_nav-link__2tU2O",active:"Navbar_active__Rjjrm","nav-text":"Navbar_nav-text__1AJjm","nav-content":"Navbar_nav-content__b8WkJ"}}},[[1037,1,2]]]);
//# sourceMappingURL=main.a5477eb5.chunk.js.map